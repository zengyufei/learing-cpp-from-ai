## **变量、基本数据类型与常量声明**

---

#### **本阶段学习目标**  
1. 掌握 C++ 中基本内置数据类型（`int`, `double`, `char`, `bool` 等）的表示范围、内存占用与字面量写法；  
2. 能正确声明、初始化和使用变量与常量（`const`）；  
3. 理解变量命名规则、作用域起点（声明即生效）及未初始化变量的风险；  
4. 能通过 `sizeof` 运算符观察类型在当前平台的实际大小，建立“类型 ≠ 抽象概念，而是具体内存布局”的认知；  
5. 初步识别整数溢出、浮点精度丢失等典型数值陷阱。

---

#### **本阶段知识点分解**

##### 1. **C++ 基本数据类型体系**
- **整型家族**：
  - `short`（通常 2 字节）、`int`（通常 4 字节）、`long`（≥4 字节）、`long long`（≥8 字节）；
  - 有符号（默认） vs 无符号（`unsigned int`）；
  - 字面量后缀：`100LL`（long long）、`200U`（unsigned）。
- **浮点型**：
  - `float`（4 字节，约 7 位有效数字）、`double`（8 字节，约 15–17 位）；
  - 字面量后缀：`3.14f`（float），默认为 `double`。
- **字符型**：
  - `char`（1 字节，存储 ASCII 或 UTF-8 单字节）；
  - 字面量用单引号：`'A'`、`'7'`、`'\n'`。
- **布尔型**：
  - `bool`：仅 `true`（1）或 `false`（0）；
  - 任何非零值转为 `true`，零转为 `false`。

- **生活化比喻**：  
  > “数据类型就像不同尺寸的快递盒：  
  > - `char` 是小信封（装一个字母）；  
  > - `int` 是标准纸箱（装整数）；  
  > - `double` 是加厚保温箱（装带小数的精密仪器）；  
  > - 你必须提前告诉快递员（编译器）用哪种盒子，它才敢打包。”

##### 2. **变量声明与初始化**
- **语法**：`类型 变量名 = 初始值;` 或 `类型 变量名(初始值);`
  ```cpp
  int age = 25;
  double price(99.9);
  char grade = 'A';
  bool is_valid{true}; // C++11 列表初始化（推荐）
  ```
- **命名规则**：
  - 必须以字母或下划线开头；
  - 区分大小写；
  - 不能是关键字（如 `int`, `return`）。
- **未初始化变量的危险**：
  - 局部变量若未初始化，其值是**随机垃圾值**；
  - 示例：`int x; std::cout << x;` → 输出不可预测。

##### 3. **常量（`const`）与字面量**
- **`const` 声明**：`const double PI = 3.14159;`
  - 一旦初始化，值不可更改；
  - 编译器可做优化（如替换为字面量）。
- **命名惯例**：常量通常全大写（`MAX_SIZE`）。
- **对比练习（防混淆）**：
  - Python 中 `x = 10` 可随时重赋值；
  - C++ 中 `const int x = 10;` 是真正的“不可变”。

##### 4. **`sizeof` 运算符与平台差异**
- **用途**：返回类型或变量占用的字节数；
  ```cpp
  std::cout << sizeof(int) << std::endl; // 通常输出 4
  std::cout << sizeof(double) << std::endl; // 通常输出 8
  ```
- **强调**：C++ 标准只规定类型**最小范围**，实际大小由平台/编译器决定；
- **生活化比喻**：  
  > “`sizeof` 就像用卷尺量快递盒——同一个‘标准纸箱’（int），在不同国家（32 位 vs 64 位系统）可能尺寸不同。”

##### 5. **常见错误与陷阱**
- ❌ 使用未初始化变量 → 逻辑错误难以追踪；  
- ❌ 整数溢出：`unsigned char c = 256;` → 实际值为 0（回绕）；  
- ❌ 浮点比较：`if (0.1 + 0.2 == 0.3)` → 可能为 false（精度丢失）；  
- ❌ 混淆 `'A'`（char）与 `"A"`（字符串字面量，类型为 `const char*`）。

---

#### **本阶段动手练习任务**

- **【基础任务】类型声明与输出（30 分钟）**  
  1. 声明以下变量并输出其值：  
     - `int year = 2025;`  
     - `double temperature = -3.5;`  
     - `char initial = 'L';`  
     - `bool is_learning = true;`  
  2. 使用 `sizeof` 打印每个类型的字节数。

- **【进阶任务】常量与初始化实验（30 分钟）**  
  1. 定义 `const double SPEED_OF_LIGHT = 299792458.0;`，尝试修改它（观察编译错误）；  
  2. 使用三种初始化方式（`=`, `()`, `{}`）声明同一变量，验证结果一致；  
  3. 声明一个未初始化的 `int x;`，输出其值（观察垃圾值）。

- **【陷阱任务】数值边界与类型混淆（30 分钟）**  
  1. 执行：`unsigned char c = 300; std::cout << (int)c;` → 观察回绕现象；  
  2. 执行：`std::cout << (0.1 + 0.2 == 0.3) << std::endl;` → 观察输出 0（false）；  
  3. 尝试：`char letter = "A";` → 观察编译错误（类型不匹配）。

---

#### **跨阶段综合小测/项目**  
- 本阶段内容将融入 **第 5 天“简易计算器”项目** 的数据表示层：  
  - 要求使用 `double` 存储运算数；  
  - 使用 `const` 定义 π（如计算圆面积）；  
  - 若因类型错误（如用 `int` 做除法）导致精度丢失，视为未达标。

---

#### **与前后阶段的知识衔接说明**

- **前置依赖**：03:00–04:30 阶段已建立 `main` 函数体作为“代码容器”，本阶段在其中**注入数据**；  
- **后继支撑**：  
  - 06:00–07:30 的“输入输出”将读取用户数据存入变量；  
  - 09:00–10:30 的“运算符”将对这些变量进行操作；  
- **螺旋上升点**：  
  - 第 5 周“内存模型”将回溯 `sizeof` 与内存布局；  
  - 第 12 周“模板”将展示如何编写与类型无关的通用代码，深化对“类型即契约”的理解。

--- 

> 本阶段是程序从“静态输出”迈向“动态计算”的第一步。变量不是“名字”，而是**内存的具名引用**；类型不是“标签”，而是**内存解释的协议**。必须通过亲手观察垃圾值、溢出、精度丢失，建立对底层确定性的敬畏。