## **for 循环结构与计数器模式**  

---

### 【第 1 步：对比引入——为什么需要 for？】（06:00–06:10）

> 同学，上一阶段你用 `while` 写了这样的代码：
> ```cpp
> int i = 0;
> while (i < 10) {
>     std::cout << i << "\n";
>     i++;
> }
> ```
>  
> 它能工作，但有点啰嗦——**初始化、条件、更新散落在三处**。  
>  
> 如果你要写 100 个这样的循环，会重复大量样板代码。  
>  
> 于是 C++ 给你一个**专用工具**：`for` 循环。  
>  
> 它把三要素**集中写在一行**，专为“已知次数的重复”而生。  
>  
> **生活化比喻**：  
> > “`while` 像手动计时跑步——你得自己看表、喊停；  
> > `for` 像跑步机设定圈数——按一下，自动跑完 10 圈停。”  
>  
> 今天，我们就来学习这个高效工具。

---

### 【第 2 步：语法拆解——for 的三部分】（06:10–06:25）

> `for` 的语法像一个三格收纳盒：
> ```cpp
> for (初始化; 条件; 更新) {
>     // 循环体
> }
> ```
>  
> **执行顺序**（务必牢记）：  
> 1. **初始化**：只执行一次（如 `int i = 0`）；  
> 2. **检查条件**：若为 `true`，进入循环体；  
> 3. **执行循环体**；  
> 4. **执行更新**（如 `i++`）；  
> 5. **回到第 2 步**，重复直到条件为 `false`。

> **等价 `while` 形式**：
> ```cpp
> int i = 0;               // 初始化
> while (i < 10) {         // 条件
>     std::cout << i << "\n";
>     i++;                 // 更新
> }
> ```
>  
> `for` 只是把这三行**压缩成一行声明**，逻辑完全一样。

---

### 【第 3 步：作用域规则——变量的“生命周期”】（06:25–06:35）

> 在 `for (int i = 0; ...)` 中声明的 `i`，有一个重要特性：  
> **它只在循环内部存在**。  
>  
> 示例：
> ```cpp
> for (int i = 0; i < 3; i++) {
>     std::cout << i << " ";
> }
> // std::cout << i; // ← 编译错误！i 已“死亡”
> ```
>  
> **为什么重要**？  
> - 避免变量名冲突（外层也有 `i`？没关系）；  
> - 减少认知负担（你知道 `i` 只用于这个循环）；  
> - 符合 C++ “最小作用域”原则。  
>  
> **记住**：**循环变量是“一次性用品”——用完即焚**。

---

### 【第 4 步：场景示范——从计数到乘法表】（06:35–06:50）

> **场景 1：基础计数**
> ```cpp
> for (int i = 1; i <= 5; i++) {
>     std::cout << "Count: " << i << "\n";
> }
> ```

> **场景 2：累加求和**
> ```cpp
> int sum = 0;
> for (int i = 1; i <= 100; i++) {
>     sum += i;
> }
> std::cout << "Sum = " << sum << "\n";
> ```

> **场景 3：九九乘法表（嵌套 for）**
> ```cpp
> for (int i = 1; i <= 9; i++) {
>     for (int j = 1; j <= i; j++) {
>         std::cout << j << "*" << i << "=" << i*j << "\t";
>     }
>     std::cout << "\n";
> }
> ```
>  
> **关键技巧**：  
> - 外层 `i` 控制行；  
> - 内层 `j` 控制列（`j <= i` 实现三角形）；  
> - `\t` 对齐输出。

---

### 【第 5 步：动手实践——你来写优雅的循环】（06:50–07:20）

> 现在轮到你了：

> **【基础任务】for 基础（20 分钟）**  
> 1. 用 `for` 输出 1 到 10；  
> 2. 计算 1 到 100 的和；  
> 3. 打印 10 到 1（倒序）；  
> 4. **故意在 `for` 后加分号**，观察循环体是否执行。

> **【进阶任务】乘法表与阶乘（30 分钟）**  
> 1. 打印格式对齐的九九乘法表；  
> 2. 计算 `1! + 2! + ... + 10!`：  
>    - 内层 `for` 算阶乘；  
>    - 外层 `for` 累加。

> **【陷阱任务】作用域与分号（10 分钟）**  
> 1. 尝试在循环后输出 `i`，记录编译错误；  
> 2. 修复：
>    ```cpp
>    for (int i = 0; i < 3; i++); // 多了一个分号！
>    {
>        std::cout << i << "\n"; // 错误：i 未声明
>    }
>    ```

---

### 【第 6 步：即时反馈——为什么分号是隐形杀手？】（07:20–07:25）

> 有同学问：“为什么 `for (...);` 会让循环体失效？”  
>  
> 因为在 C++ 中，**分号本身就是一条空语句**。  
>  
> 所以：
> ```cpp
> for (int i=0; i<3; i++);
> ```
> 等价于：
> ```cpp
> for (int i=0; i<3; i++) {
>     // 空语句，什么也不做
> }
> ```
> 后面的 `{...}` 变成**独立代码块**，不是循环体！  
>  
> **防御技巧**：  
> - 永远不要在 `for` 行尾加分号；  
> - 开启编译器警告：`g++ -Wall` 会提示“empty body”。

---

### 【第 7 步：总结 + 衔接下一阶段】（07:25–07:30）

> 今天我们升级了循环工具箱：  
>  
> ✅ 掌握了 `for` 语法与三要素；  
> ✅ 理解了循环变量作用域；  
> ✅ 实现了乘法表等典型场景。  
>  
> **何时用 `for`，何时用 `while`**？  
> - 已知次数 → `for`；  
> - 未知次数 → `while`。  
>  
> 下一阶段（07:30–09:00），我们将进入 **控制流综合编码训练**：  
> - 用 `if` / `for` / `while` 解决闰年、阶乘、斐波那契等经典问题；  
> - 系统性地制造并修复控制流陷阱。  
>  
> 而你今天写的 `for` 循环，将成为这些练习的基石。  
>  
> 准备好进入实战了吗？我们继续。

---

> 📌 **教学原则达成检查**：  
> - ✅ 结构先行：以“对比 → 语法 → 作用域 → 场景 → 实践”为逻辑链；  
> - ✅ 生活化比喻：“手动计时 vs 跑步机”贯穿 `for` 价值讲解；  
> - ✅ 动手为王：三层任务（基础/进阶/陷阱），含分号陷阱制造与修复；  
> - ✅ 防错前置：强调分号误用、作用域限制、边界条件；  
> - ✅ 衔接清晰：为07:30–09:00的综合编码训练提供 `for` / `while` 应用能力支撑。

