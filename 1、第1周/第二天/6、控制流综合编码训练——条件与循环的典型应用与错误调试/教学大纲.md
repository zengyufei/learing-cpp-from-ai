## **控制流综合编码训练——条件与循环的典型应用与错误调试**

---

#### **本阶段学习目标**  
1. 能综合运用 `if`、`while`、`for` 解决经典编程问题（闰年判断、阶乘、斐波那契数列等）；  
2. 熟练识别并修复控制流中的典型错误：**无限循环、边界遗漏、悬空 else、循环变量误用**；  
3. 掌握调试策略：通过插入计数器、打印中间变量、设置最大迭代次数定位逻辑错误；  
4. 能根据问题特征选择合适的控制结构（`for` 用于计数，`while` 用于条件驱动）；  
5. 初步形成“先设计逻辑，再编码实现”的工程习惯，避免盲目试错。

---

#### **本阶段知识点覆盖与整合**

| 知识模块 | 在本阶段的应用 |
|--------|--------------|
| `if-else`（01:30–03:00） | 闰年判断（多条件组合）、成绩分级 |
| `while`（04:30–06:00） | 斐波那契生成（未知项数）、输入重试 |
| `for`（06:00–07:30） | 阶乘计算、累加求和、嵌套循环 |
| 布尔逻辑（00:00–01:30） | 复杂条件表达式（如闰年：`(y%4==0 && y%100!=0) || y%400==0 `） |
| 错误处理（03:30–04:30） | 输入验证与循环结合（如非数字输入重试） |

---

#### **本阶段动手练习任务**

##### 【基础任务】单结构应用（30 分钟）
- **闰年判断**：  
  - 输入年份，输出是否为闰年；  
  - 条件：能被 4 整除但不能被 100 整除，**或**能被 400 整除；  
  - 要求：使用复合 `if` 条件，测试边界年份（2000, 1900, 2024）。
- **阶乘计算（for）**：  
  - 输入 `n`（0≤n≤12），输出 `n!`；  
  - 要求：处理 `0! = 1`，使用 `for` 循环累乘。

##### 【进阶任务】多结构混合（40 分钟）
- **斐波那契数列（while）**：  
  - 输入 `n`，输出前 `n` 项斐波那契数列；  
  - 要求：使用 `while` 控制项数，处理 `n=0,1,2` 边界；  
  - 示例：`n=5` → `0 1 1 2 3`。
- **成绩统计（for + if）**：  
  - 输入 5 个分数（0–100），统计 A（≥90）、B（≥80）、C（≥70）、D（≥60）、F（<60）人数；  
  - 要求：用 `for` 循环读取，`if-else if` 链分类。

##### 【陷阱任务】错误制造与修复（20 分钟）
- **无限循环陷阱**：  
  - 提供代码：`for (int i=10; i>=0; i--) { ... }`（但循环体内有 `i++`）；  
  - 要求：预测行为，修复为正常倒序。
- **悬空 else 陷阱**：  
  - 提供代码：
    ```cpp
    if (x > 0)
        if (y > 0)
            std::cout << "Q1\n";
        else
            std::cout << "Should be Q4\n"; // 实际属于内层 if
    ```
  - 要求：添加花括号修正逻辑。
- **边界遗漏陷阱**：  
  - 提供闰年判断：`if (year % 4 == 0) ...`（缺少 100/400 规则）；  
  - 要求：补充完整条件。

---

#### **本阶段调试策略指导**
- **无限循环诊断**：  
  - 插入计数器：`int iter = 0; while (cond && iter++ < 1000) ...`；  
  - 打印循环变量：`std::cout << "i=" << i << "\n";`。
- **逻辑错误定位**：  
  - 手动模拟小规模输入（如 `n=3`）；  
  - 分段验证：将复杂表达式拆为中间变量。
- **输入错误防护**：  
  - 对所有 `cin >>` 后加 `if (cin.fail())` 检查；  
  - 结合 `while` 实现自动重试（复用04:30–06:00逻辑）。

---

#### **跨阶段综合小测/项目**  
- 本阶段训练成果将直接用于 **10:30–12:00 的当日小测**：  
  - 小测包含闰年、阶乘等类似题目；  
- 同时支撑 **15:00–16:30 的猜数字游戏** 中的输入验证与循环控制。

---

#### **与前后阶段的知识衔接说明**

- **前置依赖**：综合调用 00:00–07:30 所有控制流知识，尤其依赖 `if` 条件组合与循环三要素；  
- **后继支撑**：  
  - 09:00–10:30 的 `break` / `continue` 将优化本阶段循环逻辑；  
  - 10:30–12:00 的小测将检验综合应用能力；  
- **螺旋上升点**：  
  - 第 3 周“函数封装”将把闰年、阶乘等逻辑提取为独立函数；  
  - 第 5 周“综合项目”将要求使用控制流实现菜单驱动系统。

--- 

> 本阶段是控制流知识的“压力测试”。必须通过亲手编写、调试、修复典型问题，将 `if` / `while` / `for` 内化为解决问题的直觉工具。错误不是障碍，而是暴露理解漏洞的探针——每一次修复，都是向可靠程序员迈进的一步。