## **break 与 continue 控制循环流程**

---

#### **本阶段学习目标**  
1. 掌握 `break` 语句的作用：**立即终止当前循环**，跳出循环体执行后续代码；  
2. 掌握 `continue` 语句的作用：**跳过本次循环剩余代码**，直接进入下一次迭代（`for` 中先执行更新，再判断条件）；  
3. 能在 `while` 和 `for` 循环中正确使用 `break` 与 `continue` 实现精细化流程控制；  
4. 理解 `break` / `continue` 与嵌套循环的关系：**仅影响最内层循环**；  
5. 能通过 `break` 优化搜索类问题（如质数判断、查找目标值），通过 `continue` 优化过滤类问题（如跳过偶数、无效数据）。

---

#### **本阶段知识点分解**

##### 1. **break 语句：紧急出口**
- **作用**：立即退出**当前所在的循环**（`for` / `while`），执行循环后的第一条语句；  
- **典型场景**：  
  - **搜索提前终止**：找到目标后无需继续（如猜数字正确、找到质数因子）；  
  - **输入验证退出**：用户输入特定值（如 `-1`）结束循环；  
  - **错误处理**：检测到不可恢复错误时跳出。
- **示例**：
  ```cpp
  for (int i = 2; i < n; i++) {
      if (n % i == 0) {
          std::cout << "Not prime\n";
          break; // 找到因子，无需继续
      }
  }
  ```

##### 2. **continue 语句：跳过本次**
- **作用**：跳过循环体中 `continue` 之后的代码，**直接进入下一次迭代**；  
- **在 `for` 中的行为**：  
  1. 执行 `continue`；  
  2. **执行更新表达式**（如 `i++`）；  
  3. 检查条件，决定是否继续。  
- **典型场景**：  
  - **数据过滤**：跳过不符合条件的元素（如跳过偶数、负数）；  
  - **输入重试**：检测到无效输入，跳过处理逻辑，回到输入步骤。
- **示例**：
  ```cpp
  for (int i = 1; i <= 20; i++) {
      if (i % 2 == 0) continue; // 跳过偶数
      std::cout << i << " "; // 只输出奇数
  }
  ```

##### 3. **嵌套循环中的行为**
- `break` / `continue` **只影响最内层循环**；  
- **无法直接跳出外层循环**（需用标志变量或 goto，本阶段不推荐）；  
- **示例**（嵌套 break）：
  ```cpp
  for (int i = 0; i < 3; i++) {
      for (int j = 0; j < 3; j++) {
          if (j == 1) break; // 只跳出内层循环
          std::cout << i << "," << j << "\n";
      }
  }
  // 输出：0,0 \n 1,0 \n 2,0
  ```

##### 4. **常见错误与陷阱**
- ❌ **在循环外使用 `break` / `continue`** → 编译错误；  
- ❌ **误用 `continue` 导致更新遗漏**（在 `while` 中需手动更新）；  
  ```cpp
  int i = 0;
  while (i < 10) {
      if (i % 2 == 0) continue;
      std::cout << i << "\n";
      i++; // 若 continue 在 i++ 前，i 永不更新 → 无限循环！
  }
  ```
- ❌ **过度使用导致逻辑混乱**：优先考虑清晰的条件分支，而非频繁跳转。

##### 5. **生活化比喻强化理解**
- **`break` 像消防通道**：  
  > “商场着火（找到目标），立刻从最近出口（break）撤离，不管购物车里还有什么。”  
- **`continue` 像筛子**：  
  > “筛沙子时，小石子（偶数）直接漏掉（continue），只留下大颗粒（奇数）。”

---

#### **本阶段动手练习任务**

- **【基础任务】单循环控制（30 分钟）**  
  1. **质数判断**：输入 `n`，用 `break` 优化因子搜索；  
  2. **奇数打印**：用 `continue` 跳过 1–20 中的偶数；  
  3. **输入终止**：用 `while` 循环读整数，输入 `-1` 时 `break` 退出。

- **【进阶任务】嵌套循环控制（40 分钟）**  
  1. **乘法表提前终止**：打印九九表，但当 `i*j > 30` 时 `break` 内层循环；  
  2. **无效数据跳过**：输入 5 个数，用 `continue` 跳过负数，只累加正数；  
  3. **猜数字增强**：在猜数字游戏中，输入 `0` 表示放弃，用 `break` 退出。

- **【陷阱任务】while 中的 continue 陷阱（20 分钟）**  
  1. 分析以下代码为何无限循环：
     ```cpp
     int i = 0;
     while (i < 5) {
         if (i == 2) continue;
         std::cout << i << "\n";
         i++;
     }
     ```
  2. 修复：确保 `i++` 在 `continue` 之前执行。

---

#### **跨阶段综合小测/项目**  
- 本阶段 `break` / `continue` 能力将直接用于 **15:00–16:30 的猜数字游戏**：  
  - 用 `break` 实现猜中退出；  
  - 用 `continue` 处理无效猜测（如非数字）；  
- 同时支撑 **19:30–21:00 的数学练习器** 中的单题重试逻辑。

---

#### **与前后阶段的知识衔接说明**

- **前置依赖**：07:30–09:00 阶段已掌握基础循环，本阶段提供**精细化控制手段**；  
- **后继支撑**：  
  - 10:30–12:00 的当日小测将包含 `break` / `continue` 应用题；  
  - 15:00–16:30 的猜数字游戏将综合应用所有控制流知识；  
- **螺旋上升点**：  
  - 第 13 周“STL 算法”将用 `std::find` 替代手动 `break` 搜索；  
  - 第 16 周“异常安全”将讨论 `break` / `continue` 在资源管理中的风险。

--- 

> 本阶段通过 `break` 和 `continue` 赋予循环“智能跳转”能力。必须通过亲手优化质数判断、修复 `while` 中的 `continue` 陷阱，建立对循环控制流的精确直觉。它们是利器，但滥用会导致“意大利面条代码”——清晰的结构永远优于频繁跳转。