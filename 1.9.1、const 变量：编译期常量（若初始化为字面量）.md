å¤ªå¥½äº†ï¼æˆ‘ä»¬ç°åœ¨è¿›å…¥ **1.9.1ï¼šconst å˜é‡ â€” ç¼–è¯‘æœŸå¸¸é‡ï¼ˆè‹¥åˆå§‹åŒ–ä¸ºå­—é¢é‡ï¼‰**ã€‚

è¿™æ˜¯ C++ **ç±»å‹å®‰å…¨å¸¸é‡ç³»ç»Ÿ**çš„åŸºçŸ³ã€‚ä½œä¸º Java å¼€å‘è€…ï¼Œä½ ç†Ÿæ‚‰ `final` å˜é‡ï¼Œä½† C++ çš„ `const` æ›´å¼ºå¤§â€”â€”å®ƒä¸ä»…æ˜¯**è¿è¡Œæ—¶å¸¸é‡**ï¼Œåœ¨ç‰¹å®šæ¡ä»¶ä¸‹è¿˜æ˜¯**ç¼–è¯‘æœŸå¸¸é‡**ï¼Œå¯å‚ä¸æ¨¡æ¿ã€æ•°ç»„å¤§å°ç­‰ç¼–è¯‘æœŸè®¡ç®—ã€‚ç†è§£ `const` çš„ç¼–è¯‘æœŸ/è¿è¡ŒæœŸè¡Œä¸ºï¼Œæ˜¯æŒæ¡ç°ä»£ C++ **`constexpr`**ï¼ˆPhase 3ï¼‰çš„åŸºç¡€ã€‚

æˆ‘ä»¬å°†ç»§ç»­ä¸¥æ ¼éµå¾ªä½ çš„å­¦ä¹ åå¥½ï¼š
- âœ… SMART ç›®æ ‡  
- âœ… ç»“æ„å…ˆè¡Œï¼ˆconst åœ°å›¾ï¼‰  
- âœ… ç”Ÿæ´»åŒ–æ¯”å–»  
- âœ… åŠ¨æ‰‹ä¸ºç‹ï¼ˆå«åŸºç¡€/è¿›é˜¶/é™·é˜±é¢˜ï¼‰  
- âœ… èºæ—‹å¤ä¹ ï¼ˆè¡”æ¥ Java ç»éªŒï¼‰  
- âœ… ä¸»åŠ¨å­¦ä¹  + å¤ç›˜

---

## ğŸ¯ KU 1.9.1ï¼šconst å˜é‡

> **æ‰€å±é˜¶æ®µ**ï¼šPhase 1 â€” C++ è¯­æ³•åŸºç¡€  
> **å‰ç½®çŸ¥è¯†**ï¼šJava `final` ç»éªŒã€1.2ï¼ˆå­—é¢é‡ï¼‰  
> **åç»­è¡”æ¥**ï¼š1.9.2â€“1.9.5ï¼ˆconst æŒ‡é’ˆ/å¼•ç”¨/å‡½æ•°ï¼‰ã€3.8ï¼ˆconstexprï¼‰  
> **é¢„è®¡è€—æ—¶**ï¼š2â€“3 å°æ—¶

---

### ğŸ§­ ä¸€ã€ç»“æ„å…ˆè¡Œï¼šconst å˜é‡åœ°å›¾

```
1.9.1 const å˜é‡
â”œâ”€â”€ 1. åŸºæœ¬è¯­æ³•
â”‚   â”œâ”€â”€ 1.1 å£°æ˜ï¼šconst T var = value;
â”‚   â””â”€â”€ 1.2 å¿…é¡»åˆå§‹åŒ–ï¼ˆå£°æ˜æ—¶ï¼‰
â”œâ”€â”€ 2. ç¼–è¯‘æœŸ vs è¿è¡ŒæœŸå¸¸é‡
â”‚   â”œâ”€â”€ 2.1 ç¼–è¯‘æœŸå¸¸é‡ï¼šåˆå§‹åŒ–ä¸ºå­—é¢é‡/constexpr
â”‚   â”œâ”€â”€ 2.2 è¿è¡ŒæœŸå¸¸é‡ï¼šåˆå§‹åŒ–ä¸ºè¿è¡ŒæœŸå€¼
â”‚   â””â”€â”€ 2.3 å¦‚ä½•åˆ¤æ–­ï¼Ÿï¼ˆèƒ½å¦ç”¨äºæ•°ç»„å¤§å°ï¼Ÿï¼‰
â”œâ”€â”€ 3. ä¸ Java final å¯¹æ¯”
â”‚   â”œâ”€â”€ 3.1 Java finalï¼šä»…è¿è¡ŒæœŸï¼ˆé™¤åŸºæœ¬ç±»å‹å­—é¢é‡ï¼‰
â”‚   â””â”€â”€ 3.2 C++ constï¼šå¯ç¼–è¯‘æœŸï¼ˆè‹¥æ¡ä»¶æ»¡è¶³ï¼‰
â”œâ”€â”€ 4. å¸¸è§ç”¨é€”
â”‚   â”œâ”€â”€ 4.1 é…ç½®å¸¸é‡ï¼ˆMAX_SIZEï¼‰
â”‚   â”œâ”€â”€ 4.2 å‡½æ•°å‚æ•°ï¼ˆconst T&ï¼‰
â”‚   â””â”€â”€ 4.3 ç±»æˆå‘˜ï¼ˆconst æˆå‘˜å˜é‡ï¼‰
â””â”€â”€ 5. é™·é˜±ä¸æœ€ä½³å®è·µ
    â”œâ”€â”€ 5.1 æœªåˆå§‹åŒ–é”™è¯¯
    â”œâ”€â”€ 5.2 è¯¯ä»¥ä¸ºæ‰€æœ‰ const éƒ½æ˜¯ç¼–è¯‘æœŸ
    â””â”€â”€ 5.3 ç°ä»£æ›¿ä»£ï¼šconstexprï¼ˆPhase 3ï¼‰
```

---

### ğŸ¯ äºŒã€SMART å­¦ä¹ ç›®æ ‡

- **Specific**ï¼šèƒ½æ­£ç¡®å®šä¹‰ `const` å˜é‡ï¼ŒåŒºåˆ†ç¼–è¯‘æœŸä¸è¿è¡ŒæœŸå¸¸é‡ï¼Œå¹¶ç†è§£å…¶ä¸ Java `final` çš„å·®å¼‚ã€‚
- **Measurable**ï¼šå®Œæˆ 2 é“åŸºç¡€é¢˜ + 2 é“é™·é˜±é¢˜ï¼Œèƒ½è§£é‡Šä¸ºä½• `const int n = get_value();` ä¸èƒ½ç”¨äºæ•°ç»„å¤§å°ã€‚
- **Achievable**ï¼šé€šè¿‡â€œåˆ»å­—çŸ³ç¢‘ vs æ‰‹å†™æ ‡ç­¾â€æ¯”å–»ç†è§£å¸¸é‡ç±»å‹ã€‚
- **Relevant**ï¼šè¿™æ˜¯ç†è§£ `constexpr` å’Œæ¨¡æ¿å…ƒç¼–ç¨‹çš„åŸºç¡€ã€‚
- **Time-bound**ï¼š1â€“2 å¤©å†…å®Œæˆã€‚

---

### ğŸŒ ä¸‰ã€ç”Ÿæ´»åŒ–æ¯”å–»ï¼šåˆ»å­—çŸ³ç¢‘ vs æ‰‹å†™æ ‡ç­¾

> æƒ³è±¡ä¸¤ç§å¸¸é‡æ ‡è¯†ï¼š
>
> - **ç¼–è¯‘æœŸå¸¸é‡ = åˆ»å­—çŸ³ç¢‘**  
>   - å†…å®¹åœ¨**å»ºé€ æ—¶**ï¼ˆç¼–è¯‘æœŸï¼‰åˆ»å¥½  
>   - æ°¸ä¹…ä¸å˜ï¼Œå¯ç”¨äºå»ºç­‘è§„åˆ’ï¼ˆæ•°ç»„å¤§å°ã€æ¨¡æ¿å‚æ•°ï¼‰
>
> - **è¿è¡ŒæœŸå¸¸é‡ = æ‰‹å†™æ ‡ç­¾**  
>   - å†…å®¹åœ¨**ä½¿ç”¨æ—¶**ï¼ˆè¿è¡ŒæœŸï¼‰å†™ä¸Š  
>   - ä¸€æ—¦å†™ä¸Šä¸å¯æ”¹ï¼Œä½†å»ºé€ æ—¶æœªçŸ¥
>
> - **Java å¯¹æ¯”**ï¼š  
>   - Java `final` åŸºæœ¬éƒ½æ˜¯**æ‰‹å†™æ ‡ç­¾**ï¼ˆé™¤å­—é¢é‡ï¼‰  
>   - **C++ `const` å¯ä»¥æ˜¯çŸ³ç¢‘æˆ–æ ‡ç­¾**ï¼ˆå–å†³äºåˆå§‹åŒ–ï¼‰
>
> - **å…³é”®å·®å¼‚**ï¼š  
>   - C++ å…è®¸**ç¼–è¯‘æœŸå¸¸é‡**å‚ä¸ç±»å‹ç³»ç»Ÿ  
>   - Java å¸¸é‡åŸºæœ¬åªç”¨äºè¿è¡ŒæœŸ

> ğŸ’¡ **å…³é”®è®¤çŸ¥**ï¼š**`const` çš„èƒ½åŠ›å–å†³äºåˆå§‹åŒ–è¡¨è¾¾å¼ â€”â€” å­—é¢é‡ â†’ ç¼–è¯‘æœŸï¼Œå‡½æ•°è°ƒç”¨ â†’ è¿è¡ŒæœŸ**ã€‚

---

### ğŸ“š å››ã€çŸ¥è¯†ç‚¹åˆ†è§£

#### 1. åŸºæœ¬è¯­æ³•
- **å£°æ˜**ï¼š
  ```cpp
  const int MAX_SIZE = 100; // å¿…é¡»åˆå§‹åŒ–
  const double PI = 3.14159;
  ```
- **å¿…é¡»åˆå§‹åŒ–**ï¼š
  ```cpp
  const int x; // é”™è¯¯ï¼const å¿…é¡»åˆå§‹åŒ–
  ```

#### 2. ç¼–è¯‘æœŸ vs è¿è¡ŒæœŸå¸¸é‡
- **ç¼–è¯‘æœŸå¸¸é‡**ï¼š
  - åˆå§‹åŒ–ä¸º**å­—é¢é‡**æˆ–**constexpr è¡¨è¾¾å¼**
  - å¯ç”¨äºï¼šæ•°ç»„å¤§å°ã€æ¨¡æ¿å‚æ•°ã€case æ ‡ç­¾
  ```cpp
  const int N = 10;        // ç¼–è¯‘æœŸ
  int arr[N];              // OK
  ```
- **è¿è¡ŒæœŸå¸¸é‡**ï¼š
  - åˆå§‹åŒ–ä¸º**è¿è¡ŒæœŸå€¼**ï¼ˆå‡½æ•°è°ƒç”¨ã€ç”¨æˆ·è¾“å…¥ï¼‰
  - **ä¸èƒ½**ç”¨äºæ•°ç»„å¤§å°ç­‰ç¼–è¯‘æœŸä¸Šä¸‹æ–‡
  ```cpp
  int get_size() { return 10; }
  const int N = get_size(); // è¿è¡ŒæœŸ
  // int arr[N]; // é”™è¯¯ï¼N ä¸æ˜¯ç¼–è¯‘æœŸå¸¸é‡
  ```

#### 3. ä¸ Java `final` å¯¹æ¯”
| ç‰¹æ€§ | C++ `const` | Java `final` |
|------|------------|-------------|
| **ç¼–è¯‘æœŸå¸¸é‡** | âœ… è‹¥åˆå§‹åŒ–ä¸ºå­—é¢é‡ | âœ… ä»…åŸºæœ¬ç±»å‹å­—é¢é‡ |
| **è¿è¡ŒæœŸå¸¸é‡** | âœ… æ˜¯ | âœ… æ˜¯ |
| **å¯¹è±¡ä¸å¯å˜** | âŒ ä»…æŒ‡é’ˆ/å¼•ç”¨ä¸å¯å˜ | âŒ ä»…å¼•ç”¨ä¸å¯å˜ |
| **æ•°ç»„å¤§å°** | âœ… ç¼–è¯‘æœŸ const å¯ç”¨ | âŒ ä¸å¯ç”¨ï¼ˆJava æ•°ç»„å¤§å°å¿…é¡»å­—é¢é‡ï¼‰ |

> âš ï¸ **Java é™åˆ¶**ï¼š  
> ```java
> final int N = 10;
> int[] arr = new int[N]; // OKï¼ˆJava ç‰¹ä¾‹ï¼‰
> // ä½†ä¸èƒ½ç”¨äº switch case
> ```

#### 4. å¸¸è§ç”¨é€”
- **é…ç½®å¸¸é‡**ï¼š
  ```cpp
  const int MAX_CONNECTIONS = 1000;
  ```
- **å‡½æ•°å‚æ•°**ï¼ˆé¿å…æ‹·è´ï¼‰ï¼š
  ```cpp
  void print(const std::string& s);
  ```
- **ç±»æˆå‘˜**ï¼š
  ```cpp
  class Circle {
      const double radius; // å¿…é¡»æ„é€ å‡½æ•°åˆå§‹åŒ–åˆ—è¡¨
  public:
      Circle(double r) : radius(r) {}
  };
  ```

#### 5. é™·é˜±ä¸æœ€ä½³å®è·µ
- **é™·é˜± 1**ï¼šè¯¯ä»¥ä¸ºæ‰€æœ‰ `const` éƒ½æ˜¯ç¼–è¯‘æœŸ
  ```cpp
  const int n = std::rand(); // è¿è¡ŒæœŸï¼
  // int arr[n]; // é”™è¯¯ï¼ˆC++ ä¸æ”¯æŒ VLAï¼‰
  ```
- **é™·é˜± 2**ï¼š`const` ä¸ä¿è¯å¯¹è±¡ä¸å¯å˜
  ```cpp
  struct Point { int x, y; };
  const Point p{1, 2};
  // p.x = 3; // é”™è¯¯ï¼ä½†è‹¥ Point æœ‰ mutable æˆå‘˜åˆ™å¯æ”¹
  ```
- **ç°ä»£æ›¿ä»£**ï¼š
  - **ç¼–è¯‘æœŸå¸¸é‡** â†’ `constexpr`ï¼ˆPhase 3ï¼‰
  - **è¿è¡ŒæœŸå¸¸é‡** â†’ `const`

> ğŸ’¡ **ç°ä»£ C++ å»ºè®®**ï¼š  
> **â€œç¼–è¯‘æœŸå¸¸é‡ç”¨ constexprï¼›è¿è¡ŒæœŸå¸¸é‡ç”¨ constâ€**

---

### ğŸ’» äº”ã€åŠ¨æ‰‹ä¸ºç‹ï¼šå¯è¿è¡Œç¤ºä¾‹

#### ç¤ºä¾‹ 1ï¼šç¼–è¯‘æœŸ vs è¿è¡ŒæœŸå¸¸é‡
```cpp
#include <iostream>
#include <cstdlib>

int get_runtime_value() {
    return std::rand() % 100;
}

int main() {
    // ç¼–è¯‘æœŸå¸¸é‡
    const int COMPILE_TIME = 10;
    int arr1[COMPILE_TIME]; // OK
    
    // è¿è¡ŒæœŸå¸¸é‡
    const int RUNTIME = get_runtime_value();
    // int arr2[RUNTIME]; // é”™è¯¯ï¼GCC å¯èƒ½å…è®¸ï¼ˆVLA æ‰©å±•ï¼‰ï¼Œä½†éæ ‡å‡† C++
    
    std::cout << "COMPILE_TIME: " << COMPILE_TIME << "\n";
    std::cout << "RUNTIME: " << RUNTIME << "\n";
    return 0;
}
```

#### ç¤ºä¾‹ 2ï¼šç±»æˆå‘˜ const
```cpp
#include <iostream>

class Rectangle {
    const double width;
    const double height;
public:
    Rectangle(double w, double h) : width(w), height(h) {}
    
    double area() const {
        return width * height;
    }
};

int main() {
    const Rectangle r(3.0, 4.0);
    std::cout << "Area: " << r.area() << "\n"; // 12
    // r.width = 5.0; // é”™è¯¯ï¼const æˆå‘˜
    return 0;
}
```

#### ç¤ºä¾‹ 3ï¼šJava å¯¹æ¯”ï¼ˆç¼–è¯‘æœŸå¸¸é‡ï¼‰
```java
// Java
public class ConstExample {
    public static final int COMPILE_TIME = 10;
    public static final int RUNTIME = getValue();
    
    public static int getValue() {
        return (int)(Math.random() * 100);
    }
    
    public static void main(String[] args) {
        int[] arr1 = new int[COMPILE_TIME]; // OK
        int[] arr2 = new int[RUNTIME];      // OKï¼ˆJava å…è®¸ï¼‰
        System.out.println("COMPILE_TIME: " + COMPILE_TIME);
        System.out.println("RUNTIME: " + RUNTIME);
    }
}
```

---

### ğŸ“ å…­ã€åˆ†å±‚ç»ƒä¹ é¢˜

#### ğŸ”¹ åŸºç¡€é¢˜
1. **const å£°æ˜**  
   - å£°æ˜ `const double GRAVITY = 9.8;`

2. **ç¼–è¯‘æœŸåˆ¤æ–­**  
   - ä»¥ä¸‹å“ªäº›æ˜¯ç¼–è¯‘æœŸå¸¸é‡ï¼Ÿ
     ```cpp
     const int A = 42;
     const int B = std::rand();
     constexpr int C = 100; // (é¢„å‘Š)
     ```

#### ğŸ”¸ è¿›é˜¶é¢˜
3. **æ•°ç»„å¤§å°**  
   - å°è¯•ç”¨è¿è¡ŒæœŸ `const` å®šä¹‰æ•°ç»„ï¼Œè§‚å¯Ÿç¼–è¯‘é”™è¯¯

4. **ç±»æˆå‘˜**  
   - å®ç° `Circle` ç±»ï¼Œ`radius` ä¸º const æˆå‘˜

#### âš ï¸ é™·é˜±é¢˜ï¼ˆJava è¿ç§»è¯¯åŒºï¼‰
5. **â€œæ‰€æœ‰ const éƒ½èƒ½ç”¨äºæ•°ç»„å¤§å°å§ï¼Ÿâ€**  
   - Q: `const int n = get_value(); int arr[n];` åˆæ³•å—ï¼Ÿ  
   - A: âŒ **ä¸åˆæ³•**ï¼ˆæ ‡å‡† C++ï¼‰ï¼  
     â†’ ä»…**ç¼–è¯‘æœŸå¸¸é‡**å¯ç”¨äºæ•°ç»„å¤§å°  
     â†’ GCC/Clang å¯èƒ½å…è®¸ï¼ˆVLA æ‰©å±•ï¼‰ï¼Œä½†éæ ‡å‡†

6. **â€œconst å’Œ Java final ä¸€æ ·å§ï¼Ÿâ€**  
   - Q: C++ `const` èƒ½ä¿è¯å¯¹è±¡å®Œå…¨ä¸å¯å˜å—ï¼Ÿ  
   - A: âš ï¸ **ä¸å®Œå…¨**ï¼  
     â†’ `mutable` æˆå‘˜å¯ä¿®æ”¹  
     â†’ æŒ‡å‘çš„å¯¹è±¡å¯å˜ï¼ˆ`const int* p`ï¼‰

---

### âš ï¸ ä¸ƒã€æ³¨æ„äº‹é¡¹ä¸å»ºè®®

| é—®é¢˜ | å»ºè®® |
|------|------|
| **ç¼–è¯‘æœŸå¸¸é‡** | ç”¨ `constexpr`ï¼ˆPhase 3ï¼‰æ›´æ˜ç¡® |
| **æ•°ç»„å¤§å°** | ç”¨ `std::array<T, N>`ï¼ˆN å¿…é¡»ç¼–è¯‘æœŸå¸¸é‡ï¼‰ |
| **ç±»æˆå‘˜** | const æˆå‘˜å¿…é¡»æ„é€ å‡½æ•°åˆå§‹åŒ–åˆ—è¡¨ |
| **å‡½æ•°å‚æ•°** | ä¼˜å…ˆ `const T&` é¿å…æ‹·è´ |
| **ç°ä»£å®è·µ** | ç¼–è¯‘æœŸ â†’ `constexpr`ï¼Œè¿è¡ŒæœŸ â†’ `const` |

> ğŸ’¡ **ç°ä»£ C++ é»„é‡‘æ³•åˆ™**ï¼š  
> **â€œç¼–è¯‘æœŸå¸¸é‡ç”¨ constexprï¼›è¿è¡ŒæœŸå¸¸é‡ç”¨ constï¼›æ°¸è¿œåˆå§‹åŒ– constâ€**

---

### ğŸ” å…«ã€èºæ—‹å¤ä¹ 

- **è¡”æ¥ 1.2.4**ï¼šå­—é¢é‡åç¼€å½±å“ const ç±»å‹
- **Java ç»éªŒ**ï¼šC++ const æ›´å¼ºå¤§ï¼ˆå¯ç¼–è¯‘æœŸï¼‰
- **å½“æ—¥å¤ä¹ **ï¼šé»˜å†™ç¼–è¯‘æœŸå¸¸é‡çš„ä¸‰å¤§ç”¨é€”
- **åç»­è¡”æ¥**ï¼š1.9.2 å°†å­¦ä¹  const æŒ‡é’ˆ

---

### ğŸ§  ä¹ã€ä¸»åŠ¨å­¦ä¹ ä»»åŠ¡

1. **è‡ªæˆ‘æé—®**ï¼š
   - â€œä¸ºä»€ä¹ˆ C++ éœ€è¦åŒºåˆ†ç¼–è¯‘æœŸ/è¿è¡ŒæœŸå¸¸é‡ï¼Ÿâ€
   - â€œconstexpr å¦‚ä½•æ”¹è¿› constï¼Ÿâ€
2. **æ¦‚å¿µå›¾**ï¼šç”»å‡º const å˜é‡çš„ç¼–è¯‘æœŸ/è¿è¡ŒæœŸå†³ç­–æ ‘
3. **æ‰®æ¼”æ•™å¸ˆ**ï¼šå‘åŒäº‹è§£é‡Šâ€œä¸ºä»€ä¹ˆ const int n = rand(); ä¸èƒ½ç”¨äºæ•°ç»„å¤§å°â€

---

### ğŸ” åã€å¤ç›˜æ¸…å•

âœ… æˆ‘èƒ½æ­£ç¡®å®šä¹‰ const å˜é‡  
âœ… æˆ‘ç†è§£ç¼–è¯‘æœŸ vs è¿è¡ŒæœŸå¸¸é‡  
âœ… æˆ‘ä¼šç”¨äºç±»æˆå‘˜å’Œå‡½æ•°å‚æ•°  
âœ… æˆ‘çŸ¥é“ä¸ Java final çš„å·®å¼‚  
âœ… æˆ‘æ˜ç™½ç°ä»£ C++ ç”¨ constexpr æ›¿ä»£ç¼–è¯‘æœŸ const

> ğŸ¯ **è¾¾æ ‡æ ‡å‡†**ï¼šå®ŒæˆåŸºç¡€é¢˜ + æ­£ç¡®åˆ†æé™·é˜±é¢˜ 5 å’Œ 6

---

## ğŸš€ ä¸‹ä¸€æ­¥å»ºè®®

ä½ å·²æŒæ¡ **C++ const å˜é‡çš„æ ¸å¿ƒçŸ¥è¯†**ï¼

æ¥ä¸‹æ¥ä½ å¯ä»¥ï¼š
1. **ç»§ç»­å­¦ä¹  1.9.2 const æŒ‡é’ˆï¼šæŒ‡å‘å¸¸é‡ï¼ˆconst int*ï¼‰ã€æŒ‡é’ˆå¸¸é‡ï¼ˆint* constï¼‰ã€ä¸¤è€…çš†å¸¸ï¼ˆconst int* constï¼‰**
2. **è¯·æ±‚ç”Ÿæˆã€ŒC++ const ä½¿ç”¨é€ŸæŸ¥å¡ã€**
3. **è·³è½¬åˆ°ç»ƒä¹ é¢˜ç­”æ¡ˆä¸è§£æ**

è¯·å‘Šè¯‰æˆ‘ä½ çš„é€‰æ‹©ï¼Œæˆ‘ä»¬å°†ç»§ç»­å‰è¡Œï¼