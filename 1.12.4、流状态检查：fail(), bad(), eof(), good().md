å¤ªå¥½äº†ï¼æˆ‘ä»¬ç°åœ¨è¿›å…¥ **1.12.4ï¼šæµçŠ¶æ€æ£€æŸ¥ â€” fail(), bad(), eof(), good()**ã€‚

è¿™æ˜¯ C++ **å¥å£® I/O ç¼–ç¨‹**çš„å…³é”®ï¼Œä¹Ÿæ˜¯é¿å…**é™é»˜æ•°æ®æŸå**å’Œ**æ— é™å¾ªç¯**çš„å¿…å¤‡æŠ€èƒ½ã€‚ä½œä¸º Java å¼€å‘è€…ï¼Œä½ ä¹ æƒ¯ `Scanner` çš„ `hasNext()` æˆ–å¼‚å¸¸å¤„ç†ï¼Œè€Œ C++ çš„æµçŠ¶æ€æ¨¡å‹æä¾›äº†**ç²¾ç»†çš„é”™è¯¯åˆ†ç±»**ï¼ˆæ ¼å¼é”™è¯¯ã€æ–‡ä»¶æŸåã€ç»“æŸæ ‡å¿—ï¼‰ï¼Œå…è®¸ä½ **ç²¾ç¡®è¯Šæ–­å’Œæ¢å¤**ã€‚æŒæ¡æµçŠ¶æ€æ£€æŸ¥ï¼Œæ˜¯ç¼–å†™å¯é  C++ I/O ä»£ç çš„åŸºç¡€ã€‚

æˆ‘ä»¬å°†ç»§ç»­ä¸¥æ ¼éµå¾ªä½ çš„å­¦ä¹ åå¥½ï¼š
- âœ… SMART ç›®æ ‡  
- âœ… ç»“æ„å…ˆè¡Œï¼ˆæµçŠ¶æ€åœ°å›¾ï¼‰  
- âœ… ç”Ÿæ´»åŒ–æ¯”å–»  
- âœ… åŠ¨æ‰‹ä¸ºç‹ï¼ˆå«åŸºç¡€/è¿›é˜¶/é™·é˜±é¢˜ï¼‰  
- âœ… èºæ—‹å¤ä¹ ï¼ˆè¡”æ¥ 1.12.1â€“1.12.3 + Java ç»éªŒï¼‰  
- âœ… ä¸»åŠ¨å­¦ä¹  + å¤ç›˜

---

## ğŸ¯ KU 1.12.4ï¼šæµçŠ¶æ€æ£€æŸ¥

> **æ‰€å±é˜¶æ®µ**ï¼šPhase 1 â€” C++ è¯­æ³•åŸºç¡€  
> **å‰ç½®çŸ¥è¯†**ï¼š1.12.1â€“1.12.3ï¼ˆæ ‡å‡†æµä¸æ ¼å¼æ§åˆ¶ï¼‰ã€Java I/O å¼‚å¸¸ç»éªŒ  
> **åç»­è¡”æ¥**ï¼š3.10ï¼ˆæ–‡ä»¶æµï¼‰ã€5.3ï¼ˆå¼‚å¸¸å®‰å…¨ï¼‰  
> **é¢„è®¡è€—æ—¶**ï¼š2â€“3 å°æ—¶

---

### ğŸ§­ ä¸€ã€ç»“æ„å…ˆè¡Œï¼šæµçŠ¶æ€åœ°å›¾

```
1.12.4 æµçŠ¶æ€æ£€æŸ¥
â”œâ”€â”€ 1. å››å¤§çŠ¶æ€æ ‡å¿—
â”‚   â”œâ”€â”€ 1.1 eof()ï¼šåˆ°è¾¾æ–‡ä»¶ç»“æŸ
â”‚   â”œâ”€â”€ 1.2 fail()ï¼šæ ¼å¼é”™è¯¯æˆ–é€»è¾‘é”™è¯¯
â”‚   â”œâ”€â”€ 1.3 bad()ï¼šåº•å±‚ I/O é”™è¯¯ï¼ˆæ–‡ä»¶æŸåï¼‰
â”‚   â””â”€â”€ 1.4 good()ï¼šæ— é”™è¯¯ï¼ˆæ‰€æœ‰æ ‡å¿—ä¸º falseï¼‰
â”œâ”€â”€ 2. çŠ¶æ€å…³ç³»
â”‚   â”œâ”€â”€ 2.1 bad() â†’ fail() ä¹Ÿ true
â”‚   â”œâ”€â”€ 2.2 fail() ä¸ä¸€å®š eof()
â”‚   â””â”€â”€ 2.3 eof() æ˜¯æ­£å¸¸ç»“æŸï¼Œéé”™è¯¯
â”œâ”€â”€ 3. å¸¸è§åœºæ™¯
â”‚   â”œâ”€â”€ 3.1 è¾“å…¥å¾ªç¯ï¼šwhile (cin >> x)
â”‚   â”œâ”€â”€ 3.2 é”™è¯¯æ¢å¤ï¼šclear() + ignore()
â”‚   â””â”€â”€ 3.3 æ–‡ä»¶è¯»å–ï¼šæ£€æŸ¥ eof() ä¸ fail()
â”œâ”€â”€ 4. ä¸ Java çš„å¯¹æ¯”
â”‚   â”œâ”€â”€ 4.1 C++ï¼šçŠ¶æ€æ ‡å¿—ï¼ˆæ— å¼‚å¸¸ï¼‰
â”‚   â””â”€â”€ 4.2 Javaï¼šIOExceptionï¼ˆå¼‚å¸¸é©±åŠ¨ï¼‰
â”œâ”€â”€ 5. é™·é˜±ä¸æœ€ä½³å®è·µ
    â”œâ”€â”€ 5.1 è¯¯ç”¨ eof() ä½œä¸ºå¾ªç¯æ¡ä»¶
    â”œâ”€â”€ 5.2 æœªæ£€æŸ¥ fail() å¯¼è‡´é™é»˜é”™è¯¯
    â””â”€â”€ 5.3 ä¼˜å…ˆç›´æ¥åœ¨ >> / << ä¸­æ£€æŸ¥
```

---

### ğŸ¯ äºŒã€SMART å­¦ä¹ ç›®æ ‡

- **Specific**ï¼šèƒ½æ­£ç¡®ä½¿ç”¨ `fail()`ã€`bad()`ã€`eof()`ã€`good()` æ£€æŸ¥æµçŠ¶æ€ï¼Œç†è§£å…¶å…³ç³»ï¼Œå¹¶é¿å…å¸¸è§é™·é˜±ã€‚
- **Measurable**ï¼šå®Œæˆ 2 é“åŸºç¡€é¢˜ + 2 é“é™·é˜±é¢˜ï¼Œèƒ½ä¿®å¤â€œeof() å¾ªç¯é™·é˜±â€ã€‚
- **Achievable**ï¼šé€šè¿‡â€œä»ªè¡¨ç›˜â€æ¯”å–»ç†è§£æµçŠ¶æ€ã€‚
- **Relevant**ï¼šè¿™æ˜¯ç¼–å†™å¥å£®æ–‡ä»¶è§£æå™¨çš„åŸºç¡€ã€‚
- **Time-bound**ï¼š1â€“2 å¤©å†…å®Œæˆã€‚

---

### ğŸŒ ä¸‰ã€ç”Ÿæ´»åŒ–æ¯”å–»ï¼šæ±½è½¦ä»ªè¡¨ç›˜

> æƒ³è±¡ä¸€è¾†æ±½è½¦çš„**ä»ªè¡¨ç›˜**ï¼š
>
> - **eof() = åˆ°è¾¾ç›®çš„åœ°ç¯**  
>   - æ­£å¸¸ç»“æŸï¼ˆéé”™è¯¯ï¼‰
>
> - **fail() = å¼•æ“æ•…éšœç¯**  
>   - æ ¼å¼é”™è¯¯ï¼ˆå¦‚è¾“å…¥ "abc" åˆ° intï¼‰
>
> - **bad() = ä¸¥é‡äº‹æ•…ç¯**  
>   - åº•å±‚æŸåï¼ˆæ–‡ä»¶è¢«åˆ é™¤ï¼‰
>
> - **good() = ä¸€åˆ‡æ­£å¸¸ç¯**  
>   - æ‰€æœ‰ç¯ç­
>
> - **Java å¯¹æ¯”**ï¼š  
>   - Java = **å®‰å…¨æ°”å›Š**ï¼ˆå‡ºé”™ç«‹å³å¼¹å‡ºå¼‚å¸¸ï¼‰  
>   - **C++ = ä»ªè¡¨ç›˜**ï¼ˆæŒç»­ç›‘æ§ï¼Œè‡ªè¡Œå¤„ç†ï¼‰
>
> - **å…³é”®å·®å¼‚**ï¼š  
>   - C++ **æ— å¼‚å¸¸**ï¼ˆé»˜è®¤ï¼‰ï¼Œéœ€ä¸»åŠ¨æ£€æŸ¥çŠ¶æ€  
>   - Java **å¼‚å¸¸é©±åŠ¨**ï¼Œè‡ªåŠ¨ä¸­æ–­

> ğŸ’¡ **å…³é”®è®¤çŸ¥**ï¼š**C++ æµçŠ¶æ€æ˜¯æ— å£°çš„ä»ªè¡¨ç›˜ï¼›ä½ å¿…é¡»ä¸»åŠ¨æŸ¥çœ‹**ã€‚

---

### ğŸ“š å››ã€çŸ¥è¯†ç‚¹åˆ†è§£

#### 1. å››å¤§çŠ¶æ€æ ‡å¿—
- **`eof()`**ï¼š  
  - åˆ°è¾¾**è¾“å…¥æµç»“æŸ**ï¼ˆå¦‚æ–‡ä»¶æœ«å°¾ï¼‰  
  - **æ­£å¸¸çŠ¶æ€**ï¼Œéé”™è¯¯
  ```cpp
  if (std::cin.eof()) {
      std::cout << "End of input\n";
  }
  ```
- **`fail()`**ï¼š  
  - **æ ¼å¼/é€»è¾‘é”™è¯¯**ï¼ˆå¦‚ `cin >> int` ä½†è¾“å…¥ "abc"ï¼‰  
  - **æœ€å¸¸è§é”™è¯¯**
  ```cpp
  if (std::cin.fail()) {
      std::cerr << "Invalid input format\n";
  }
  ```
- **`bad()`**ï¼š  
  - **åº•å±‚ I/O é”™è¯¯**ï¼ˆå¦‚ç£ç›˜æŸåã€æ–‡ä»¶è¢«åˆ é™¤ï¼‰  
  - **ä¸¥é‡é”™è¯¯**
  ```cpp
  if (file.bad()) {
      std::cerr << "File system error\n";
  }
  ```
- **`good()`**ï¼š  
  - **æ— ä»»ä½•é”™è¯¯**ï¼ˆ`eof()`, `fail()`, `bad()` å…¨ä¸º falseï¼‰
  ```cpp
  if (std::cin.good()) {
      // å®‰å…¨è¯»å–
  }
  ```

#### 2. çŠ¶æ€å…³ç³»
- **`bad()` è•´å« `fail()`**ï¼š  
  - è‹¥ `bad() == true`ï¼Œåˆ™ `fail() == true`
- **`fail()` ä¸è•´å« `eof()`**ï¼š  
  - æ ¼å¼é”™è¯¯æ—¶ `eof()` é€šå¸¸ä¸º false
- **`eof()` æ˜¯æ­£å¸¸ç»“æŸ**ï¼š  
  - è¯»å–åˆ°æ–‡ä»¶æœ«å°¾æ—¶ `eof() == true`ï¼Œä½† `fail() == false`

#### 3. å¸¸è§åœºæ™¯
- **è¾“å…¥å¾ªç¯**ï¼ˆæ­£ç¡®æ–¹å¼ï¼‰ï¼š
  ```cpp
  int x;
  while (std::cin >> x) { // ç›´æ¥æ£€æŸ¥ >> æ“ä½œç¬¦ï¼ˆè¿”å›æµï¼‰
      // å¤„ç† x
  }
  if (std::cin.fail() && !std::cin.eof()) {
      std::cerr << "Non-EOF failure\n";
  }
  ```
- **é”™è¯¯æ¢å¤**ï¼š
  ```cpp
  std::cin.clear(); // é‡ç½®é”™è¯¯æ ‡å¿—
  std::cin.ignore(std::numeric_limits<std::streamsize>::max(), '\n'); // è·³è¿‡æ•´è¡Œ
  ```
- **æ–‡ä»¶è¯»å–**ï¼š
  ```cpp
  std::ifstream file("data.txt");
  std::string line;
  while (std::getline(file, line)) {
      // å¤„ç† line
  }
  if (file.bad()) {
      std::cerr << "File read error\n";
  }
  ```

#### 4. ä¸ Java çš„å¯¹æ¯”
| ç‰¹æ€§ | C++ æµçŠ¶æ€ | Java I/O |
|------|-----------|---------|
| **é”™è¯¯å¤„ç†** | çŠ¶æ€æ ‡å¿—ï¼ˆéœ€ä¸»åŠ¨æ£€æŸ¥ï¼‰ | å¼‚å¸¸ï¼ˆè‡ªåŠ¨æŠ›å‡ºï¼‰ |
| **æ€§èƒ½** | æ— å¼‚å¸¸å¼€é”€ | å¼‚å¸¸æœ‰å¼€é”€ |
| **æ§åˆ¶** | ç²¾ç»†ï¼ˆå¯æ¢å¤ï¼‰ | ç²—ç²’åº¦ï¼ˆä¸­æ–­ï¼‰ |
| **é»˜è®¤è¡Œä¸º** | é™é»˜å¤±è´¥ | æŠ›å‡º IOException |

#### 5. é™·é˜±ä¸æœ€ä½³å®è·µ
- **eof() å¾ªç¯é™·é˜±**ï¼š
  ```cpp
  // é”™è¯¯ï¼
  while (!std::cin.eof()) {
      std::cin >> x; // æœ€åä¸€æ¬¡è¯»å–å¯èƒ½å¤±è´¥ï¼Œä½† eof() æœªè®¾
      // å¤„ç† xï¼ˆå¯èƒ½æ— æ•ˆï¼‰
  }
  
  // æ­£ç¡®ï¼
  while (std::cin >> x) {
      // å¤„ç† x
  }
  ```
- **æœªæ£€æŸ¥ fail()**ï¼š
  ```cpp
  int x;
  std::cin >> x;
  // è‹¥è¾“å…¥ "abc"ï¼Œx ä¸º 0ï¼ˆé™é»˜é”™è¯¯ï¼‰
  ```
- **ä¼˜å…ˆç›´æ¥æ£€æŸ¥**ï¼š
  - `while (stream >> var)` æ¯” `while (!stream.eof())` æ›´å¯é 

> ğŸ’¡ **ç°ä»£ C++ é»„é‡‘æ³•åˆ™**ï¼š  
> **â€œç›´æ¥åœ¨ >> / << ä¸­æ£€æŸ¥ï¼›é¿å… eof() å¾ªç¯ï¼›åŠæ—¶ clear() æ¢å¤â€**

---

### ğŸ’» äº”ã€åŠ¨æ‰‹ä¸ºç‹ï¼šå¯è¿è¡Œç¤ºä¾‹

#### ç¤ºä¾‹ 1ï¼šçŠ¶æ€æ ‡å¿—æ£€æŸ¥
```cpp
#include <iostream>
#include <limits>

int main() {
    int x;
    std::cout << "Enter an integer: ";
    std::cin >> x;
    
    if (std::cin.good()) {
        std::cout << "Good: " << x << "\n";
    }
    if (std::cin.eof()) {
        std::cout << "EOF reached\n";
    }
    if (std::cin.fail()) {
        std::cout << "Fail flag set\n";
        std::cin.clear(); // é‡ç½®
        std::cin.ignore(std::numeric_limits<std::streamsize>::max(), '\n');
    }
    if (std::cin.bad()) {
        std::cout << "Bad flag set\n";
    }
    
    return 0;
}
```

#### ç¤ºä¾‹ 2ï¼šeof() å¾ªç¯é™·é˜±
```cpp
#include <iostream>

// é”™è¯¯æ–¹å¼
void bad_loop() {
    int x;
    while (!std::cin.eof()) {
        std::cin >> x;
        std::cout << "Read: " << x << "\n"; // æœ€åå¯èƒ½è¾“å‡º 0
    }
}

// æ­£ç¡®æ–¹å¼
void good_loop() {
    int x;
    while (std::cin >> x) {
        std::cout << "Read: " << x << "\n";
    }
}

int main() {
    std::cout << "Enter integers (Ctrl+D to end):\n";
    // bad_loop(); // æ³¨é‡Šé¿å…é™·é˜±
    good_loop();
    return 0;
}
```

#### ç¤ºä¾‹ 3ï¼šé”™è¯¯æ¢å¤
```cpp
#include <iostream>
#include <limits>

int main() {
    int x;
    while (true) {
        std::cout << "Enter integer: ";
        if (std::cin >> x) {
            std::cout << "You entered: " << x << "\n";
            break;
        } else {
            std::cerr << "Invalid! ";
            std::cin.clear(); // é‡ç½® fail()
            std::cin.ignore(std::numeric_limits<std::streamsize>::max(), '\n'); // è·³è¿‡è¡Œ
        }
    }
    return 0;
}
```

---

### ğŸ“ å…­ã€åˆ†å±‚ç»ƒä¹ é¢˜

#### ğŸ”¹ åŸºç¡€é¢˜
1. **çŠ¶æ€æ£€æŸ¥**  
   - è¾“å…¥éæ•´æ•°ï¼Œæ£€æŸ¥ `fail()` å’Œ `eof()`

2. **é”™è¯¯æ¢å¤**  
   - å®ç°è¾“å…¥æ•´æ•°çš„é”™è¯¯æ¢å¤å¾ªç¯

#### ğŸ”¸ è¿›é˜¶é¢˜
3. **æ–‡ä»¶è¯»å–**  
   - è¯»å–æ–‡ä»¶ï¼Œæ£€æŸ¥ `bad()` é”™è¯¯

4. **çŠ¶æ€å…³ç³»**  
   - éªŒè¯ `bad()` æ—¶ `fail()` ä¸º true

#### âš ï¸ é™·é˜±é¢˜ï¼ˆJava è¿ç§»è¯¯åŒºï¼‰
5. **â€œeof() æ˜¯å¾ªç¯æ¡ä»¶å§ï¼Ÿâ€**  
   - Q: `while (!cin.eof()) { cin >> x; }` æ­£ç¡®å—ï¼Ÿ  
   - A: âŒ **ä¸æ­£ç¡®**ï¼  
     â†’ å¯èƒ½å¤šå¤„ç†ä¸€æ¬¡æ— æ•ˆæ•°æ®  
     â†’ **æ­£ç¡®ï¼š`while (cin >> x)`**

6. **â€œC++ ä¼šæŠ›å¼‚å¸¸å§ï¼Ÿâ€**  
   - Q: C++ æµé»˜è®¤æŠ›å¼‚å¸¸å—ï¼Ÿ  
   - A: âŒ **ä¸æŠ›**ï¼  
     â†’ é»˜è®¤**é™é»˜è®¾ç½®çŠ¶æ€æ ‡å¿—**  
     â†’ å¯å¯ç”¨å¼‚å¸¸ï¼š`cin.exceptions(std::ios::failbit);`

---

### âš ï¸ ä¸ƒã€æ³¨æ„äº‹é¡¹ä¸å»ºè®®

| é—®é¢˜ | å»ºè®® |
|------|------|
| **å¾ªç¯æ¡ä»¶** | ä¼˜å…ˆ `while (stream >> var)` |
| **é”™è¯¯æ¢å¤** | `clear()` + `ignore()` |
| **æ–‡ä»¶æ£€æŸ¥** | è¯»å–åæ£€æŸ¥ `bad()` |
| **å¼‚å¸¸å¯ç”¨** | ä»…ç‰¹æ®Šåœºæ™¯ï¼ˆ`exceptions()`ï¼‰ |
| **ç°ä»£å®è·µ** | ç”¨ RAII å°è£…æ–‡ä»¶æµ

> ğŸ’¡ **ç°ä»£ C++ é»„é‡‘æ³•åˆ™**ï¼š  
> **â€œæµçŠ¶æ€éœ€ä¸»åŠ¨æ£€æŸ¥ï¼›ç›´æ¥åœ¨ >> ä¸­éªŒè¯ï¼›é¿å… eof() å¾ªç¯â€**

---

### ğŸ” å…«ã€èºæ—‹å¤ä¹ 

- **è¡”æ¥ 1.12.1**ï¼šæµå¯¹è±¡æœ‰çŠ¶æ€  
- **Java ç»éªŒ**ï¼šC++ æ— å¼‚å¸¸é»˜è®¤ï¼Œéœ€çŠ¶æ€æ£€æŸ¥  
- **å½“æ—¥å¤ä¹ **ï¼šé»˜å†™å››å¤§çŠ¶æ€æ ‡å¿—ç”¨é€”

---

### ğŸ§  ä¹ã€ä¸»åŠ¨å­¦ä¹ ä»»åŠ¡

1. **è‡ªæˆ‘æé—®**ï¼š
   - â€œå¦‚ä½•å¯ç”¨æµå¼‚å¸¸æ¨¡å¼ï¼Ÿâ€
   - â€œä¸ºä»€ä¹ˆ bad() è•´å« fail()ï¼Ÿâ€
2. **æ¦‚å¿µå›¾**ï¼šç”»å‡ºæµçŠ¶æ€æ ‡å¿—å…³ç³»å›¾
3. **æ‰®æ¼”æ•™å¸ˆ**ï¼šå‘åŒäº‹è§£é‡Šâ€œä¸ºä»€ä¹ˆ eof() å¾ªç¯æ˜¯é™·é˜±â€

---

### ğŸ” åã€å¤ç›˜æ¸…å•

âœ… æˆ‘èƒ½æ­£ç¡®ä½¿ç”¨å››å¤§æµçŠ¶æ€æ ‡å¿—  
âœ… æˆ‘ç†è§£ eof() / fail() / bad() çš„å…³ç³»  
âœ… æˆ‘ä¼šé¿å… eof() å¾ªç¯é™·é˜±  
âœ… æˆ‘çŸ¥é“é”™è¯¯æ¢å¤æ–¹æ³•  
âœ… æˆ‘æ˜ç™½ C++ ä¸ Java I/O é”™è¯¯å¤„ç†å·®å¼‚

> ğŸ¯ **è¾¾æ ‡æ ‡å‡†**ï¼šå®ŒæˆåŸºç¡€é¢˜ + æ­£ç¡®åˆ†æé™·é˜±é¢˜ 5 å’Œ 6

---

## ğŸš€ ä¸‹ä¸€æ­¥å»ºè®®

ä½ å·²æŒæ¡ **C++ æµçŠ¶æ€æ£€æŸ¥çš„æ ¸å¿ƒçŸ¥è¯†**ï¼

æ¥ä¸‹æ¥ä½ å¯ä»¥ï¼š
1. **ç»§ç»­å­¦ä¹  1.12.5 æ–‡ä»¶æµåˆæ­¥ï¼šstd::ifstream / std::ofstream**
2. **è¯·æ±‚ç”Ÿæˆã€ŒC++ æµçŠ¶æ€é€ŸæŸ¥å¡ã€**
3. **è·³è½¬åˆ°ç»ƒä¹ é¢˜ç­”æ¡ˆä¸è§£æ**

è¯·å‘Šè¯‰æˆ‘ä½ çš„é€‰æ‹©ï¼Œæˆ‘ä»¬å°†ç»§ç»­å‰è¡Œï¼