å¤ªå¥½äº†ï¼æˆ‘ä»¬ç°åœ¨è¿›å…¥ **2.5.4ï¼šä¸‹æ ‡è¿ç®—ç¬¦ [] â€” é€šå¸¸è¿”å›å¼•ç”¨ä»¥æ”¯æŒèµ‹å€¼**ã€‚

è¿™æ˜¯ C++ **è¿ç®—ç¬¦é‡è½½**ä¸­çš„å…³é”®æ¨¡å¼ï¼Œä¹Ÿæ˜¯å®ç°**ç±»ä¼¼æ•°ç»„/å®¹å™¨è¡Œä¸º**çš„æ ‡å‡†æ–¹å¼ã€‚ä½œä¸º Java å¼€å‘è€…ï¼Œä½ ç†Ÿæ‚‰ `list.get(i)` å’Œ `list.set(i, value)`ï¼Œè€Œ C++ çš„ `operator[]` é€šè¿‡**è¿”å›å¼•ç”¨**ï¼Œèƒ½åŒæ—¶æ”¯æŒ**è¯»å–å’Œèµ‹å€¼**ï¼Œæä¾›æ›´è‡ªç„¶çš„è¯­æ³•ã€‚æŒæ¡è¿™ä¸€æ¨¡å¼ï¼Œèƒ½è®©ä½ çš„è‡ªå®šä¹‰å®¹å™¨åƒ `std::vector` ä¸€æ ·æ˜“ç”¨ã€‚

æˆ‘ä»¬å°†ç»§ç»­ä¸¥æ ¼éµå¾ªä½ çš„å­¦ä¹ åå¥½ï¼š
- âœ… SMART ç›®æ ‡  
- âœ… ç»“æ„å…ˆè¡Œï¼ˆä¸‹æ ‡è¿ç®—ç¬¦åœ°å›¾ï¼‰  
- âœ… ç”Ÿæ´»åŒ–æ¯”å–»  
- âœ… åŠ¨æ‰‹ä¸ºç‹ï¼ˆå«åŸºç¡€/è¿›é˜¶/é™·é˜±é¢˜ï¼‰  
- âœ… èºæ—‹å¤ä¹ ï¼ˆè¡”æ¥ 2.5.1â€“2.5.3 + Java ç»éªŒï¼‰  
- âœ… ä¸»åŠ¨ learning + å¤ç›˜

---

## ğŸ¯ KU 2.5.4ï¼šä¸‹æ ‡è¿ç®—ç¬¦ []

> **æ‰€å±é˜¶æ®µ**ï¼šPhase 2 â€” é¢å‘å¯¹è±¡ç¼–ç¨‹  
> **å‰ç½®çŸ¥è¯†**ï¼š2.5.1â€“2.5.3ï¼ˆè¿ç®—ç¬¦é‡è½½ï¼‰ã€Java List ç»éªŒ  
> **åç»­è¡”æ¥**ï¼š2.5.5ï¼ˆå‡½æ•°è°ƒç”¨è¿ç®—ç¬¦ï¼‰ã€3.9ï¼ˆæ ‡å‡†å®¹å™¨ï¼‰  
> **é¢„è®¡è€—æ—¶**ï¼š2â€“3 å°æ—¶

---

### ğŸ§­ ä¸€ã€ç»“æ„å…ˆè¡Œï¼šä¸‹æ ‡è¿ç®—ç¬¦åœ°å›¾

```
2.5.4 ä¸‹æ ‡è¿ç®—ç¬¦
â”œâ”€â”€ 1. åŸºæœ¬è¦æ±‚
â”‚   â”œâ”€â”€ 1.1 è¯­æ³•ï¼šT& operator[](size_t index)
â”‚   â”œâ”€â”€ 1.2 è¿”å›å¼•ç”¨ï¼ˆT&ï¼‰ä»¥æ”¯æŒèµ‹å€¼
â”‚   â””â”€â”€ 1.3 å¸¸é‡ç‰ˆæœ¬ï¼šconst T& operator[](size_t index) const
â”œâ”€â”€ 2. å®ç°è¦ç‚¹
â”‚   â”œâ”€â”€ 2.1 è¾¹ç•Œæ£€æŸ¥ï¼ˆå¯é€‰ï¼Œstd::vector ä¸æ£€æŸ¥ï¼‰
â”‚   â”œâ”€â”€ 2.2 è¿”å›å·¦å€¼å¼•ç”¨ï¼ˆæ”¯æŒ a[i] = valueï¼‰
â”‚   â””â”€â”€ 2.3 å¸¸é‡æ­£ç¡®æ€§ï¼ˆconst å¯¹è±¡è°ƒç”¨ const ç‰ˆæœ¬ï¼‰
â”œâ”€â”€ 3. å¸¸è§é”™è¯¯
â”‚   â”œâ”€â”€ 3.1 è¿”å›å€¼ï¼ˆTï¼‰è€Œéå¼•ç”¨ï¼ˆT&ï¼‰
â”‚   â”œâ”€â”€ 3.2 å¿˜è®° const ç‰ˆæœ¬
â”‚   â””â”€â”€ 3.3 è¾¹ç•Œæ£€æŸ¥ä¸ä¸€è‡´ï¼ˆat() vs []ï¼‰
â”œâ”€â”€ 4. ä¸ Java çš„å¯¹æ¯”
â”‚   â”œâ”€â”€ 4.1 C++ï¼šoperator[] è¿”å›å¼•ç”¨ï¼ˆè¯»/å†™ï¼‰
â”‚   â””â”€â”€ 4.2 Javaï¼šget()/set() åˆ†ç¦»ï¼ˆä»…è¯»/ä»…å†™ï¼‰
â”œâ”€â”€ 5. é«˜çº§ç”¨æ³•
    â”œâ”€â”€ 5.1 ä»£ç†å¯¹è±¡ï¼ˆæ”¯æŒ a[i] = a[j]ï¼‰
    â”œâ”€â”€ 5.2 å¤šç»´ä¸‹æ ‡ï¼ˆoperator[](i, j)ï¼‰
    â””â”€â”€ 5.3 ä½åŸŸè®¿é—®ï¼ˆè¿”å› proxy referenceï¼‰
â””â”€â”€ 6. æœ€ä½³å®è·µ
    â”œâ”€â”€ 6.1 é€šå¸¸è¿”å›å¼•ç”¨
    â”œâ”€â”€ 6.2 æä¾› const ç‰ˆæœ¬
    â””â”€â”€ 6.3 è¾¹ç•Œæ£€æŸ¥ç”¨ at()ï¼Œ[] ä¸æ£€æŸ¥
```

---

### ğŸ¯ äºŒã€SMART å­¦ä¹ ç›®æ ‡

- **Specific**ï¼šèƒ½æ­£ç¡®å®ç°ä¸‹æ ‡è¿ç®—ç¬¦ï¼Œç†è§£è¿”å›å¼•ç”¨çš„å¿…è¦æ€§ï¼Œå¹¶æä¾› const ç‰ˆæœ¬ã€‚
- **Measurable**ï¼šå®Œæˆ 2 é“åŸºç¡€é¢˜ + 2 é“é™·é˜±é¢˜ï¼Œèƒ½ä¿®å¤å› è¿”å›å€¼å¯¼è‡´çš„èµ‹å€¼é”™è¯¯ã€‚
- **Achievable**ï¼šé€šè¿‡â€œåŒå‘é—¨ç¦â€æ¯”å–»ç†è§£å¼•ç”¨è¿”å›ã€‚
- **Relevant**ï¼šè¿™æ˜¯ç¼–å†™è‡ªå®šä¹‰å®¹å™¨çš„æ ‡å‡†æ–¹å¼ã€‚
- **Time-bound**ï¼š1â€“2 å¤©å†…å®Œæˆã€‚

---

### ğŸŒ ä¸‰ã€ç”Ÿæ´»åŒ–æ¯”å–»ï¼šåŒå‘é—¨ç¦

> æƒ³è±¡ä¸€ä¸ª**åŒå‘é—¨ç¦ç³»ç»Ÿ**ï¼š
>
> - **è¿”å›å¼•ç”¨ = åŒå‘é—¨ç¦**  
>   - ä½ **è¯»å–**é—¨åç‰©å“ï¼ˆ`value = a[i]`ï¼‰  
>   - ä½ **æ”¾ç½®**æ–°ç‰©å“ï¼ˆ`a[i] = value`ï¼‰
>
> - **è¿”å›å€¼ = å•å‘é—¨ç¦**  
>   - ä½ åªèƒ½**è¯»å–å‰¯æœ¬**ï¼ˆ`value = a[i]`ï¼‰  
>   - **æ— æ³•æ”¾ç½®**æ–°ç‰©å“ï¼ˆ`a[i] = value` é”™è¯¯ï¼‰
>
> - **Java å¯¹æ¯”**ï¼š  
>   - Java = **ä¸¤ä¸ªé—¨ç¦**ï¼ˆ`get()` è¯»ï¼Œ`set()` å†™ï¼‰  
>   - **C++ = ä¸€ä¸ªåŒå‘é—¨ç¦**ï¼ˆ`[]` è¯»å†™ï¼‰

> ğŸ’¡ **å…³é”®è®¤çŸ¥**ï¼š**è¿”å›å¼•ç”¨æ˜¯ä¸‹æ ‡è¿ç®—ç¬¦æ”¯æŒèµ‹å€¼çš„å…³é”®**ã€‚

---

### ğŸ“š å››ã€çŸ¥è¯†ç‚¹åˆ†è§£

#### 1. åŸºæœ¬è¦æ±‚
- **é const ç‰ˆæœ¬**ï¼š
  ```cpp
  T& operator[](size_t index); // è¿”å›å·¦å€¼å¼•ç”¨
  ```
- **const ç‰ˆæœ¬**ï¼š
  ```cpp
  const T& operator[](size_t index) const; // const å¯¹è±¡è°ƒç”¨
  ```
- **æ”¯æŒèµ‹å€¼**ï¼š
  ```cpp
  MyVector v(10);
  v[0] = 42; // éœ€è¦ T& è¿”å›
  ```

#### 2. å®ç°è¦ç‚¹
- **è¾¹ç•Œæ£€æŸ¥**ï¼š
  - `operator[]` **é€šå¸¸ä¸æ£€æŸ¥**ï¼ˆæ€§èƒ½ä¼˜å…ˆï¼Œå¦‚ `std::vector`ï¼‰
  - `at()` **æ£€æŸ¥å¹¶æŠ›å¼‚å¸¸**
- **è¿”å›å·¦å€¼å¼•ç”¨**ï¼š
  - å…è®¸èµ‹å€¼ï¼š`a[i] = value`
  - å…è®¸å–åœ°å€ï¼š`&a[i]`
- **å¸¸é‡æ­£ç¡®æ€§**ï¼š
  ```cpp
  const MyVector v(10);
  auto x = v[0]; // è°ƒç”¨ const ç‰ˆæœ¬
  // v[0] = 42; // é”™è¯¯ï¼const å¯¹è±¡
  ```

#### 3. å¸¸è§é”™è¯¯
- **è¿”å›å€¼**ï¼š
  ```cpp
  T operator[](size_t index) { return data_[index]; } // é”™è¯¯ï¼
  // v[0] = 42; // Error! cannot assign to temporary
  ```
- **å¿˜è®° const ç‰ˆæœ¬**ï¼š
  ```cpp
  const MyVector v(10);
  auto x = v[0]; // Error! no const operator[]
  ```
- **è¾¹ç•Œæ£€æŸ¥ä¸ä¸€è‡´**ï¼š
  - æ··æ·† `[]`ï¼ˆæ— æ£€æŸ¥ï¼‰å’Œ `at()`ï¼ˆæœ‰æ£€æŸ¥ï¼‰

#### 4. ä¸ Java çš„å¯¹æ¯”
| ç‰¹æ€§ | C++ | Java |
|------|-----|------|
| **è¯»å†™è¯­æ³•** | `a[i] = value` | `list.set(i, value)` |
| **è¿”å›ç±»å‹** | å¼•ç”¨ï¼ˆT&ï¼‰ | å€¼ï¼ˆTï¼‰ |
| **å¸¸é‡æ­£ç¡®æ€§** | const ç‰ˆæœ¬ | æ— ï¼ˆä½†æœ‰ unmodifiableListï¼‰ |

#### 5. é«˜çº§ç”¨æ³•
- **ä»£ç†å¯¹è±¡**ï¼ˆä½åŸŸè®¿é—®ï¼‰ï¼š
  ```cpp
  class BitReference {
      unsigned char& byte_;
      int bit_;
  public:
      operator bool() const { return (byte_ >> bit_) & 1; }
      BitReference& operator=(bool b) {
          if (b) byte_ |= (1 << bit_);
          else byte_ &= ~(1 << bit_);
          return *this;
      }
  };
  
  class BitSet {
      std::vector<unsigned char> data_;
  public:
      BitReference operator[](size_t index) {
          return BitReference{data_[index/8], index%8};
      }
  };
  ```
- **å¤šç»´ä¸‹æ ‡**ï¼š
  ```cpp
  T& operator()(size_t i, size_t j); // ç”¨äº matrix(i, j)
  ```

#### 6. æœ€ä½³å®è·µ
- **é€šå¸¸è¿”å›å¼•ç”¨**ï¼š
  - é™¤éç‰¹æ®Šéœ€æ±‚ï¼ˆå¦‚åªè¯»å®¹å™¨ï¼‰
- **æä¾› const ç‰ˆæœ¬**ï¼š
  - æ”¯æŒ const å¯¹è±¡è®¿é—®
- **è¾¹ç•Œæ£€æŸ¥ç”¨ at()**ï¼š
  - `operator[]` æ— æ£€æŸ¥ï¼ˆé«˜æ€§èƒ½ï¼‰
  - `at()` æœ‰æ£€æŸ¥ï¼ˆå®‰å…¨ï¼‰

> ğŸ’¡ **ç°ä»£ C++ é»„é‡‘æ³•åˆ™**ï¼š  
> **â€œä¸‹æ ‡è¿ç®—ç¬¦è¿”å›å¼•ç”¨ï¼›æä¾› const ç‰ˆæœ¬ï¼›è¾¹ç•Œæ£€æŸ¥ç”¨ at()â€**

---

### ğŸ’» äº”ã€åŠ¨æ‰‹ä¸ºç‹ï¼šå¯è¿è¡Œç¤ºä¾‹

#### ç¤ºä¾‹ 1ï¼šåŸºæœ¬ä¸‹æ ‡è¿ç®—ç¬¦
```cpp
#include <iostream>
#include <vector>

class MyVector {
    std::vector<int> data_;
    
public:
    MyVector(size_t n) : data_(n) {}
    
    // é const ç‰ˆæœ¬ï¼ˆè¿”å›å¼•ç”¨ï¼‰
    int& operator[](size_t index) {
        return data_[index]; // æ— è¾¹ç•Œæ£€æŸ¥
    }
    
    // const ç‰ˆæœ¬
    const int& operator[](size_t index) const {
        return data_[index];
    }
    
    size_t size() const { return data_.size(); }
};

int main() {
    MyVector v(5);
    
    // èµ‹å€¼ï¼ˆéœ€è¦å¼•ç”¨è¿”å›ï¼‰
    v[0] = 10;
    v[1] = 20;
    
    // è¯»å–
    std::cout << "v[0] = " << v[0] << "\n";
    
    // const å¯¹è±¡
    const MyVector cv = v;
    std::cout << "cv[1] = " << cv[1] << "\n";
    // cv[0] = 30; // Error! const å¯¹è±¡
    
    return 0;
}
```

#### ç¤ºä¾‹ 2ï¼šé”™è¯¯å®ç°ï¼ˆè¿”å›å€¼ï¼‰
```cpp
// é”™è¯¯ç¤ºä¾‹
class BadVector {
    std::vector<int> data_;
public:
    BadVector(size_t n) : data_(n) {}
    
    // é”™è¯¯ï¼šè¿”å›å€¼
    int operator[](size_t index) const {
        return data_[index];
    }
    
    // æ— æ³•å®ç°é const ç‰ˆæœ¬ï¼ˆéœ€è¦å¼•ç”¨ï¼‰
};

int main() {
    BadVector v(5);
    // v[0] = 10; // Error! cannot assign to temporary
    auto x = v[0]; // OK (ä½†æ— èµ‹å€¼)
    return 0;
}
```

#### ç¤ºä¾‹ 3ï¼šè¾¹ç•Œæ£€æŸ¥ï¼ˆat vs []ï¼‰
```cpp
#include <iostream>
#include <stdexcept>

class SafeVector {
    std::vector<int> data_;
    
public:
    SafeVector(size_t n) : data_(n) {}
    
    int& operator[](size_t index) {
        return data_[index]; // æ— æ£€æŸ¥
    }
    
    const int& operator[](size_t index) const {
        return data_[index];
    }
    
    int& at(size_t index) {
        if (index >= data_.size()) throw std::out_of_range("at");
        return data_[index];
    }
    
    const int& at(size_t index) const {
        if (index >= data_.size()) throw std::out_of_range("at");
        return data_[index];
    }
};

int main() {
    SafeVector v(3);
    
    // æ— æ£€æŸ¥ï¼ˆé«˜æ•ˆï¼‰
    v[0] = 1;
    
    // æœ‰æ£€æŸ¥ï¼ˆå®‰å…¨ï¼‰
    try {
        v.at(10) = 2;
    } catch (const std::exception& e) {
        std::cout << "Error: " << e.what() << "\n";
    }
    
    return 0;
}
```

---

### ğŸ“ å…­ã€åˆ†å±‚ç»ƒä¹ é¢˜

#### ğŸ”¹ åŸºç¡€é¢˜
1. **ä¸‹æ ‡è¯­æ³•**  
   - ä¸º `MyArray` ç±»å®ç° `operator[]`ï¼ˆè¿”å›å¼•ç”¨ï¼‰

2. **const ç‰ˆæœ¬**  
   - ä¸º `MyArray` æ·»åŠ  const ç‰ˆæœ¬çš„ `operator[]`

#### ğŸ”¸ è¿›é˜¶é¢˜
3. **è¾¹ç•Œæ£€æŸ¥**  
   - å®ç° `at()` æ–¹æ³•ï¼Œå¸¦è¾¹ç•Œæ£€æŸ¥

4. **ä»£ç†å¯¹è±¡**  
   - ä¸º `BitSet` ç±»å®ç°ä½åŸŸä¸‹æ ‡è®¿é—®ï¼ˆå¯é€‰ï¼‰

#### âš ï¸ é™·é˜±é¢˜ï¼ˆJava è¿ç§»è¯¯åŒºï¼‰
5. **â€œè¿”å›å€¼å¯ä»¥å§ï¼Ÿâ€**  
   - Q: `T operator[](size_t index)` å¯ä»¥æ”¯æŒèµ‹å€¼å—ï¼Ÿ  
   - A: âŒ **ä¸å¯ä»¥**ï¼  
     â†’ è¿”å›å€¼æ˜¯**ä¸´æ—¶å¯¹è±¡**  
     â†’ `a[i] = value` å°è¯•èµ‹å€¼ç»™ä¸´æ—¶å¯¹è±¡ â†’ **ç¼–è¯‘é”™è¯¯**

6. **â€œJava ä¹Ÿæœ‰ [] å§ï¼Ÿâ€**  
   - Q: Java èƒ½ `list[0] = value` å—ï¼Ÿ  
   - A: âŒ **ä¸èƒ½**ï¼  
     â†’ Java **æ•°ç»„æ”¯æŒ `[]`**  
     â†’ **List å¿…é¡»ç”¨ `set()`**  
     â†’ **C++ ç»Ÿä¸€ç”¨ `[]`**

---

### âš ï¸ ä¸ƒã€æ³¨æ„äº‹é¡¹ä¸å»ºè®®

| é—®é¢˜ | å»ºè®® |
|------|------|
| **è¿”å›ç±»å‹** | å¿…é¡» `T&`/`const T&`ï¼Œé `T` |
| **const æ­£ç¡®æ€§** | æä¾› const ç‰ˆæœ¬ |
| **è¾¹ç•Œæ£€æŸ¥** | `[]` æ— æ£€æŸ¥ï¼Œ`at()` æœ‰æ£€æŸ¥ |
| **ç°ä»£å®è·µ** | éµå¾ªæ ‡å‡†åº“æƒ¯ä¾‹ï¼ˆå¦‚ `std::vector`ï¼‰

> ğŸ’¡ **ç°ä»£ C++ é»„é‡‘æ³•åˆ™**ï¼š  
> **â€œä¸‹æ ‡è¿ç®—ç¬¦ = å¼•ç”¨è¿”å› + const ç‰ˆæœ¬ + æ— è¾¹ç•Œæ£€æŸ¥â€**

---

### ğŸ” å…«ã€èºæ—‹å¤ä¹ 

- **è¡”æ¥ 2.5.3**ï¼šèµ‹å€¼è¿ç®—ç¬¦è¿”å› *thisï¼Œä¸‹æ ‡è¿”å›å¼•ç”¨  
- **Java ç»éªŒ**ï¼šC++ `[]` æ¯” Java `get/set` æ›´ç»Ÿä¸€  
- **å½“æ—¥å¤ä¹ **ï¼šé»˜å†™ä¸‹æ ‡è¿ç®—ç¬¦çš„ä¸‰å¤§å®ç°è¦ç‚¹

---

### ğŸ§  ä¹ã€ä¸»åŠ¨ learning ä»»åŠ¡

1. **è‡ªæˆ‘æé—®**ï¼š
   - â€œå¦‚ä½•ç”¨ proxy å®ç° a[i] = a[j]ï¼Ÿâ€
   - â€œC++20 ranges å¦‚ä½•å½±å“ä¸‹æ ‡è¿ç®—ç¬¦ï¼Ÿâ€
2. **æ¦‚å¿µå›¾**ï¼šç”»å‡º C++ ä¸ Java å®¹å™¨è®¿é—®å¯¹æ¯”
3. **æ‰®æ¼”æ•™å¸ˆ**ï¼šå‘åŒäº‹è§£é‡Šâ€œä¸ºä»€ä¹ˆä¸‹æ ‡å¿…é¡»è¿”å›å¼•ç”¨â€

---

### ğŸ” åã€å¤ç›˜æ¸…å•

âœ… æˆ‘èƒ½æ­£ç¡®å®ç°ä¸‹æ ‡è¿ç®—ç¬¦  
âœ… æˆ‘ç†è§£è¿”å›å¼•ç”¨çš„å¿…è¦æ€§  
âœ… æˆ‘ä¼šæä¾› const ç‰ˆæœ¬  
âœ… æˆ‘çŸ¥é“ä¸ Java å®¹å™¨è®¿é—®çš„å·®å¼‚  
âœ… æˆ‘æŒæ¡ç°ä»£ C++ çš„ä¸‹æ ‡æœ€ä½³å®è·µ

> ğŸ¯ **è¾¾æ ‡æ ‡å‡†**ï¼šå®ŒæˆåŸºç¡€é¢˜ + æ­£ç¡®åˆ†æé™·é˜±é¢˜ 5 å’Œ 6

---

## ğŸš€ ä¸‹ä¸€æ­¥å»ºè®®

ä½ å·²æŒæ¡ **C++ ä¸‹æ ‡è¿ç®—ç¬¦çš„æ ¸å¿ƒçŸ¥è¯†**ï¼

æ¥ä¸‹æ¥ä½ å¯ä»¥ï¼š
1. **ç»§ç»­å­¦ä¹  2.5.5 å‡½æ•°è°ƒç”¨è¿ç®—ç¬¦ï¼ˆï¼‰ï¼šä»¿å‡½æ•°ï¼ˆFunctorï¼‰**
2. **è¯·æ±‚ç”Ÿæˆã€ŒC++ ä¸‹æ ‡è¿ç®—ç¬¦é€ŸæŸ¥å¡ã€**
3. **è·³è½¬åˆ°ç»ƒä¹ é¢˜ç­”æ¡ˆä¸è§£æ**

è¯·å‘Šè¯‰æˆ‘ä½ çš„é€‰æ‹©ï¼Œæˆ‘ä»¬å°†ç»§ç»­å‰è¡Œï¼