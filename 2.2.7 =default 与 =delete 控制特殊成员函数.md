å¤ªå¥½äº†ï¼æˆ‘ä»¬ç°åœ¨è¿›å…¥ **2.2.7ï¼š=default ä¸ =delete æ§åˆ¶ç‰¹æ®Šæˆå‘˜å‡½æ•°**ã€‚

è¿™æ˜¯ C++11 å¸¦æ¥çš„**ç²¾ç»†åŒ–æ§åˆ¶é©å‘½**ï¼Œè®©ä½ èƒ½**æ˜¾å¼å£°æ˜**ç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆçš„ç‰¹æ®Šæˆå‘˜å‡½æ•°ï¼Œæˆ–**æ˜ç¡®ç¦æ­¢**ä¸éœ€è¦çš„æ“ä½œã€‚ä½œä¸º Java å¼€å‘è€…ï¼Œä½ å¯èƒ½ä¹ æƒ¯ç”¨ `private` æ„é€ å‡½æ•°ç¦æ­¢å®ä¾‹åŒ–ï¼Œè€Œ C++ çš„ `=delete` æä¾›äº†**æ›´æ¸…æ™°ã€æ›´å¼ºå¤§**çš„ç¦ç”¨æœºåˆ¶ã€‚æŒæ¡ `=default` å’Œ `=delete`ï¼Œèƒ½è®©ä½ ç¼–å†™å‡º**æ„å›¾æ˜ç¡®ã€å®‰å…¨é«˜æ•ˆ**çš„ç°ä»£ C++ ä»£ç ã€‚

æˆ‘ä»¬å°†ç»§ç»­ä¸¥æ ¼éµå¾ªä½ çš„å­¦ä¹ åå¥½ï¼š
- âœ… SMART ç›®æ ‡  
- âœ… ç»“æ„å…ˆè¡Œï¼ˆ=default/=delete åœ°å›¾ï¼‰  
- âœ… ç”Ÿæ´»åŒ–æ¯”å–»  
- âœ… åŠ¨æ‰‹ä¸ºç‹ï¼ˆå«åŸºç¡€/è¿›é˜¶/é™·é˜±é¢˜ï¼‰  
- âœ… èºæ—‹å¤ä¹ ï¼ˆè¡”æ¥ 2.2.6 + Java ç»éªŒï¼‰  
- âœ… ä¸»åŠ¨ learning + å¤ç›˜

---

## ğŸ¯ KU 2.2.7ï¼š=default ä¸ =delete

> **æ‰€å±é˜¶æ®µ**ï¼šPhase 2 â€” é¢å‘å¯¹è±¡ç¼–ç¨‹  
> **å‰ç½®çŸ¥è¯†**ï¼š2.2.6ï¼ˆç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆè§„åˆ™ï¼‰ã€Java è®¿é—®æ§åˆ¶ç»éªŒ  
> **åç»­è¡”æ¥**ï¼š2.3ï¼ˆRAIIï¼‰ã€2.4ï¼ˆæ‹·è´è¯­ä¹‰ï¼‰  
> **é¢„è®¡è€—æ—¶**ï¼š2â€“3 å°æ—¶

---

### ğŸ§­ ä¸€ã€ç»“æ„å…ˆè¡Œï¼š=default/=delete åœ°å›¾

```
2.2.7 =default ä¸ =delete
â”œâ”€â”€ 1. =default è¯­æ³•
â”‚   â”œâ”€â”€ 1.1 æ˜¾å¼è¯·æ±‚ç¼–è¯‘å™¨ç”Ÿæˆ
â”‚   â”œâ”€â”€ 1.2 å¯ç”¨äºç‰¹æ®Šæˆå‘˜å‡½æ•°å’Œæ™®é€šå‡½æ•°
â”‚   â””â”€â”€ 1.3 æ¯”ç”¨æˆ·å®šä¹‰æ›´é«˜æ•ˆï¼ˆtrivialï¼‰
â”œâ”€â”€ 2. =delete è¯­æ³•
â”‚   â”œâ”€â”€ 2.1 æ˜¾å¼ç¦æ­¢å‡½æ•°
â”‚   â”œâ”€â”€ 2.2 å¯ç”¨äºä»»ä½•å‡½æ•°ï¼ˆåŒ…æ‹¬éæˆå‘˜ï¼‰
â”‚   â””â”€â”€ 2.3 æ¯” private æ›´æ¸…æ™°ï¼ˆç¼–è¯‘æœŸé”™è¯¯ vs é“¾æ¥é”™è¯¯ï¼‰
â”œâ”€â”€ 3. å¸¸è§ç”¨é€”
â”‚   â”œâ”€â”€ 3.1 =defaultï¼šæ¢å¤è¢«æŠ‘åˆ¶çš„å‡½æ•°
â”‚   â”œâ”€â”€ 3.2 =deleteï¼šç¦æ­¢æ‹·è´/ç§»åŠ¨/ç‰¹å®šé‡è½½
â”‚   â””â”€â”€ 3.3 æ¨¡æ¿ç¦ç”¨ï¼ˆSFINAE æ›¿ä»£ï¼‰
â”œâ”€â”€ 4. ä¸ Java çš„å¯¹æ¯”
â”‚   â”œâ”€â”€ 4.1 Javaï¼šç”¨ private æ„é€ å‡½æ•°ç¦æ­¢å®ä¾‹åŒ–
â”‚   â””â”€â”€ 4.2 C++ï¼š=delete æ›´æ˜ç¡®ã€æ›´å¼ºå¤§
â”œâ”€â”€ 5. é™·é˜±ä¸æœ€ä½³å®è·µ
    â”œâ”€â”€ 5.1 =default ä½ç½®ï¼ˆå£°æ˜ or å®šä¹‰ï¼‰
    â”œâ”€â”€ 5.2 =delete åœ¨é‡è½½è§£æä¸­çš„ä¼˜å…ˆçº§
    â””â”€â”€ 5.3 ä¼˜å…ˆ =delete è€Œé private
â””â”€â”€ 6. ç°ä»£ C++ æœ€ä½³å®è·µ
    â”œâ”€â”€ 6.1 æ˜¾å¼ =default è¡¨è¾¾æ„å›¾
    â”œâ”€â”€ 6.2 ç”¨ =delete ç¦æ­¢ä¸å®‰å…¨æ“ä½œ
    â””â”€â”€ 6.3 ç»“åˆ Rule of Zero ä½¿ç”¨
```

---

### ğŸ¯ äºŒã€SMART å­¦ä¹ ç›®æ ‡

- **Specific**ï¼šèƒ½æ­£ç¡®ä½¿ç”¨ `=default` å’Œ `=delete` æ§åˆ¶ç‰¹æ®Šæˆå‘˜å‡½æ•°ï¼Œç†è§£å…¶å¸¸è§ç”¨é€”å’Œä¸ Java çš„å·®å¼‚ã€‚
- **Measurable**ï¼šå®Œæˆ 2 é“åŸºç¡€é¢˜ + 2 é“é™·é˜±é¢˜ï¼Œèƒ½è§£é‡Šä¸ºä½• `=delete` æ¯” `private` æ›´å®‰å…¨ã€‚
- **Achievable**ï¼šé€šè¿‡â€œæ˜ç¡®æŒ‡ä»¤â€æ¯”å–»ç†è§£ =default/=deleteã€‚
- **Relevant**ï¼šè¿™æ˜¯ç¼–å†™ç°ä»£ C++ ç±»çš„æ ‡å‡†å®è·µã€‚
- **Time-bound**ï¼š1â€“2 å¤©å†…å®Œæˆã€‚

---

### ğŸŒ ä¸‰ã€ç”Ÿæ´»åŒ–æ¯”å–»ï¼šæ˜ç¡®æŒ‡ä»¤ç³»ç»Ÿ

> æƒ³è±¡ä¸€ä¸ª**æ™ºèƒ½æŒ‡ä»¤ç³»ç»Ÿ**ï¼š
>
> - **æ— æ˜¾å¼æŒ‡ä»¤ = ç¼–è¯‘å™¨çŒœæµ‹**  
>   - ä½ ä¸è¯´â€œç”Ÿæˆé»˜è®¤æ„é€ â€ï¼Œç¼–è¯‘å™¨å¯èƒ½å› å…¶ä»–å®šä¹‰**ä¸ç”Ÿæˆ**
>
> - **=default = â€œè¯·ç”Ÿæˆæ ‡å‡†ç‰ˆâ€**  
>   - æ˜ç¡®å‘Šè¯‰ç¼–è¯‘å™¨ï¼šâ€œå³ä½¿æˆ‘å®šä¹‰äº†ææ„ï¼Œä¹Ÿè¯·ç”Ÿæˆé»˜è®¤æ„é€ â€
>
> - **=delete = â€œç¦æ­¢æ­¤æ“ä½œâ€**  
>   - æ˜ç¡®å‘Šè¯‰ç¼–è¯‘å™¨ï¼šâ€œä¸å…è®¸æ‹·è´ï¼Œç»™æˆ‘ç¼–è¯‘é”™è¯¯â€
>
> - **Java å¯¹æ¯”**ï¼š  
>   - Java = **ç”¨ private éšè—**ï¼ˆé“¾æ¥æ—¶é”™è¯¯ï¼‰  
>   - **C++ =delete = ç›´æ¥ç¦æ­¢**ï¼ˆç¼–è¯‘æ—¶é”™è¯¯ï¼Œæ›´æ¸…æ™°ï¼‰

> ğŸ’¡ **å…³é”®è®¤çŸ¥**ï¼š**=default/=delete æ˜¯æ˜¾å¼æŒ‡ä»¤ï¼Œæ¶ˆé™¤ç¼–è¯‘å™¨çŒœæµ‹**ã€‚

---

### ğŸ“š å››ã€çŸ¥è¯†ç‚¹åˆ†è§£

#### 1. =default è¯­æ³•
- **æ˜¾å¼è¯·æ±‚ç”Ÿæˆ**ï¼š
  ```cpp
  class MyClass {
  public:
      MyClass() = default; // æ˜¾å¼è¯·æ±‚é»˜è®¤æ„é€ 
      ~MyClass() = default; // æ˜¾å¼è¯·æ±‚ææ„
  };
  ```
- **å¯ç”¨äº**ï¼š
  - ç‰¹æ®Šæˆå‘˜å‡½æ•°ï¼ˆæ„é€ ã€ææ„ã€æ‹·è´ã€ç§»åŠ¨ï¼‰
  - æ™®é€šæˆå‘˜å‡½æ•°ï¼ˆC++20ï¼‰
- **ä¼˜åŠ¿**ï¼š
  - æ¯”ç©ºå‡½æ•°ä½“ `{}` **æ›´é«˜æ•ˆ**ï¼ˆå¯èƒ½ trivialï¼‰
  - **æ¢å¤è¢«æŠ‘åˆ¶çš„å‡½æ•°**ï¼ˆå¦‚å®šä¹‰ææ„åæ¢å¤é»˜è®¤æ„é€ ï¼‰

#### 2. =delete è¯­æ³•
- **æ˜¾å¼ç¦æ­¢**ï¼š
  ```cpp
  class NonCopyable {
  public:
      NonCopyable() = default;
      NonCopyable(const NonCopyable&) = delete; // ç¦æ­¢æ‹·è´
      NonCopyable& operator=(const NonCopyable&) = delete;
  };
  ```
- **å¯ç”¨äºä»»ä½•å‡½æ•°**ï¼š
  ```cpp
  void process(int x) = delete; // ç¦æ­¢ int ç‰ˆæœ¬
  void process(double x);       // ä»…å…è®¸ double
  ```
- **ä¼˜åŠ¿**ï¼š
  - **ç¼–è¯‘æœŸé”™è¯¯**ï¼ˆæ¯” private æ›´æ—©æŠ¥é”™ï¼‰
  - **æ˜ç¡®æ„å›¾**ï¼ˆä»£ç è‡ªæ–‡æ¡£åŒ–ï¼‰

#### 3. å¸¸è§ç”¨é€”
- **=default**ï¼š
  - å®šä¹‰ææ„åï¼Œæ¢å¤é»˜è®¤æ„é€ ï¼š
    ```cpp
    class RuleOfZero {
        std::string s_;
    public:
        ~RuleOfZero() { /* custom cleanup */ }
        RuleOfZero() = default; // æ¢å¤é»˜è®¤æ„é€ 
    };
    ```
- **=delete**ï¼š
  - ç¦æ­¢æ‹·è´ï¼ˆå¦‚å•ä¾‹ã€èµ„æºå¥æŸ„ï¼‰ï¼š
    ```cpp
    class FileHandle {
        FILE* file_;
    public:
        FileHandle(const char* name) : file_(fopen(name, "r")) {}
        ~FileHandle() { if (file_) fclose(file_); }
        FileHandle(const FileHandle&) = delete;
    };
    ```
  - ç¦æ­¢ç‰¹å®šé‡è½½ï¼š
    ```cpp
    class SafeInt {
        int value_;
    public:
        SafeInt(int v) : value_(v) {}
        SafeInt(double) = delete; // ç¦æ­¢ double â†’ int éšå¼è½¬æ¢
    };
    ```

#### 4. ä¸ Java çš„å¯¹æ¯”
| ç‰¹æ€§ | C++ `=delete` | Java `private` |
|------|--------------|---------------|
| **é”™è¯¯é˜¶æ®µ** | ç¼–è¯‘æœŸ | é“¾æ¥æœŸï¼ˆè‹¥æœªè°ƒç”¨ï¼‰ |
| **æ˜ç¡®æ€§** | âœ… æ˜¾å¼ç¦æ­¢ | âš ï¸ éšå¼éšè— |
| **é€‚ç”¨èŒƒå›´** | ä»»ä½•å‡½æ•° | ä»…æˆå‘˜å‡½æ•° |
| **æ„å›¾è¡¨è¾¾** | æ¸…æ™°ï¼ˆâ€œç¦æ­¢â€ï¼‰ | æ¨¡ç³Šï¼ˆâ€œéšè—â€ï¼‰ |

#### 5. é™·é˜±ä¸æœ€ä½³å®è·µ
- **=default ä½ç½®**ï¼š
  - **å£°æ˜å¤„**ï¼šå‡½æ•° trivialï¼ˆå¯èƒ½å†…è”ï¼‰
  - **å®šä¹‰å¤„**ï¼šå‡½æ•° non-trivial
  ```cpp
  class C {
  public:
      C() = default; // trivial
  };
  
  class D {
  public:
      D();
  };
  D::D() = default; // non-trivial
  ```
- **=delete é‡è½½è§£æ**ï¼š
  - `=delete` å‡½æ•°å‚ä¸é‡è½½è§£æï¼Œä½†è°ƒç”¨æ—¶æŠ¥é”™
  ```cpp
  void f(int) = delete;
  void f(double);
  f(42); // Error! int ç‰ˆæœ¬è¢«é€‰ä¸­ä½† deleted
  ```
- **ä¼˜å…ˆ =delete**ï¼š
  - æ¯” `private` æ›´å®‰å…¨ã€æ›´æ¸…æ™°

#### 6. ç°ä»£ C++ æœ€ä½³å®è·µ
- **æ˜¾å¼ =default**ï¼š
  - è¡¨è¾¾â€œæˆ‘æƒ³è¦ç¼–è¯‘å™¨ç”Ÿæˆçš„æ ‡å‡†è¡Œä¸ºâ€
- **ç”¨ =delete ç¦æ­¢**ï¼š
  - æ‹·è´/ç§»åŠ¨ï¼ˆå½“ä¸éœ€è¦æ—¶ï¼‰
  - ä¸å®‰å…¨çš„éšå¼è½¬æ¢
- **ç»“åˆ Rule of Zero**ï¼š
  - ç”¨ RAII æˆå‘˜ï¼Œç‰¹æ®Šæˆå‘˜å‡½æ•° `=default`

> ğŸ’¡ **ç°ä»£ C++ é»„é‡‘æ³•åˆ™**ï¼š  
> **â€œ=default è¡¨è¾¾æ„å›¾ï¼›=delete æ˜ç¡®ç¦æ­¢ï¼›ä¼˜å…ˆäº privateâ€**

---

### ğŸ’» äº”ã€åŠ¨æ‰‹ä¸ºç‹ï¼šå¯è¿è¡Œç¤ºä¾‹

#### ç¤ºä¾‹ 1ï¼š=default æ¢å¤é»˜è®¤æ„é€ 
```cpp
#include <iostream>
#include <string>

class WithDestructor {
    std::string s_;
public:
    WithDestructor(const char* s) : s_(s) {}
    ~WithDestructor() { std::cout << "Custom destructor\n"; }
    
    // æ—  =default â†’ æ— é»˜è®¤æ„é€ 
    // WithDestructor() = default; // å–æ¶ˆæ³¨é‡Šä»¥æ¢å¤
};

int main() {
    // WithDestructor d; // Error! æ— é»˜è®¤æ„é€ 
    WithDestructor d("Hello");
    return 0;
}
```

#### ç¤ºä¾‹ 2ï¼š=delete ç¦æ­¢æ‹·è´
```cpp
#include <iostream>

class NonCopyable {
    int id_;
public:
    NonCopyable(int id) : id_(id) {
        std::cout << "Create " << id_ << "\n";
    }
    
    ~NonCopyable() {
        std::cout << "Destroy " << id_ << "\n";
    }
    
    // æ˜ç¡®ç¦æ­¢æ‹·è´
    NonCopyable(const NonCopyable&) = delete;
    NonCopyable& operator=(const NonCopyable&) = delete;
};

int main() {
    NonCopyable a(42);
    // NonCopyable b = a; // Error! deleted
    return 0;
}
```

#### ç¤ºä¾‹ 3ï¼š=delete ç¦æ­¢ç‰¹å®šé‡è½½
```cpp
#include <iostream>

class SafeNumber {
    int value_;
public:
    SafeNumber(int v) : value_(v) {}
    
    // ç¦æ­¢ double â†’ int éšå¼è½¬æ¢
    SafeNumber(double) = delete;
    
    void print() const {
        std::cout << "Value: " << value_ << "\n";
    }
};

int main() {
    SafeNumber n(42); // OK
    // SafeNumber m(3.14); // Error! deleted
    n.print();
    return 0;
}
```

---

### ğŸ“ å…­ã€åˆ†å±‚ç»ƒä¹ é¢˜

#### ğŸ”¹ åŸºç¡€é¢˜
1. **=default è¯­æ³•**  
   - ä¸º `MyClass` æ˜¾å¼è¯·æ±‚é»˜è®¤æ„é€ å’Œææ„

2. **=delete ç”¨é€”**  
   - ç¦æ­¢ `MyClass` çš„æ‹·è´æ„é€ å‡½æ•°

#### ğŸ”¸ è¿›é˜¶é¢˜
3. **æ¢å¤è¢«æŠ‘åˆ¶å‡½æ•°**  
   - å®šä¹‰ææ„åï¼Œç”¨ `=default` æ¢å¤é»˜è®¤æ„é€ 

4. **ç¦æ­¢éšå¼è½¬æ¢**  
   - ç”¨ `=delete` ç¦æ­¢ `SafeInt` çš„ `char` æ„é€ 

#### âš ï¸ é™·é˜±é¢˜ï¼ˆJava è¿ç§»è¯¯åŒºï¼‰
5. **â€œprivate æ„é€ å‡½æ•°å°±å¤Ÿäº†å§ï¼Ÿâ€**  
   - Q: C++ ç”¨ `private` ç¦æ­¢æ‹·è´å’Œ `=delete` ä¸€æ ·å—ï¼Ÿ  
   - A: âŒ **ä¸ä¸€æ ·**ï¼  
     â†’ `private`ï¼š**é“¾æ¥æ—¶é”™è¯¯**ï¼ˆè‹¥æœªè°ƒç”¨ï¼Œæ— é”™è¯¯ï¼‰  
     â†’ `=delete`ï¼š**ç¼–è¯‘æ—¶é”™è¯¯**ï¼ˆæ›´æ—©ã€æ›´å®‰å…¨ï¼‰

6. **â€œ=delete èƒ½ç”¨äºæ™®é€šå‡½æ•°å§ï¼Ÿâ€**  
   - Q: `void f(int) = delete;` åˆæ³•å—ï¼Ÿ  
   - A: âœ… **åˆæ³•**ï¼  
     â†’ C++11 èµ·ï¼Œ`=delete` **å¯ç”¨äºä»»ä½•å‡½æ•°**

---

### âš ï¸ ä¸ƒã€æ³¨æ„äº‹é¡¹ä¸å»ºè®®

| é—®é¢˜ | å»ºè®® |
|------|------|
| **=default ä½ç½®** | å£°æ˜å¤„ï¼ˆtrivialï¼‰ vs å®šä¹‰å¤„ï¼ˆnon-trivialï¼‰ |
| **=delete é‡è½½** | å‚ä¸è§£æï¼Œè°ƒç”¨æ—¶æŠ¥é”™ |
| **ç°ä»£å®è·µ** | ä¼˜å…ˆ `=delete` è€Œé `private` |
| **æ„å›¾è¡¨è¾¾** | ç”¨ `=default`/`=delete` ä½¿ä»£ç è‡ªæ–‡æ¡£åŒ– |

> ğŸ’¡ **ç°ä»£ C++ é»„é‡‘æ³•åˆ™**ï¼š  
> **â€œ=default æ˜¾å¼è¯·æ±‚ï¼›=delete æ˜ç¡®ç¦æ­¢ï¼›ç¼–è¯‘æœŸé”™è¯¯ä¼˜äºé“¾æ¥æœŸâ€**

---

### ğŸ” å…«ã€èºæ—‹å¤ä¹ 

- **è¡”æ¥ 2.2.6**ï¼š=default/=delete æ˜¯ Rule of Zero çš„å·¥å…·  
- **Java ç»éªŒ**ï¼šC++ æä¾›æ›´ç²¾ç»†çš„æ§åˆ¶  
- **å½“æ—¥å¤ä¹ **ï¼šé»˜å†™ =default/=delete çš„ä¸‰å¤§ç”¨é€”

---

### ğŸ§  ä¹ã€ä¸»åŠ¨ learning ä»»åŠ¡

1. **è‡ªæˆ‘æé—®**ï¼š
   - â€œå¦‚ä½•ç”¨ =delete å®ç°å•ä¾‹æ¨¡å¼ï¼Ÿâ€
   - â€œ=default å¦‚ä½•å½±å“ trivialityï¼Ÿâ€
2. **æ¦‚å¿µå›¾**ï¼šç”»å‡º =default/=delete ä¸ private å¯¹æ¯”
3. **æ‰®æ¼”æ•™å¸ˆ**ï¼šå‘åŒäº‹è§£é‡Šâ€œä¸ºä»€ä¹ˆ =delete æ¯” private æ›´å®‰å…¨â€

---

### ğŸ” åã€å¤ç›˜æ¸…å•

âœ… æˆ‘èƒ½æ­£ç¡®ä½¿ç”¨ =default å’Œ =delete  
âœ… æˆ‘ç†è§£å…¶å¸¸è§ç”¨é€”å’Œä¼˜åŠ¿  
âœ… æˆ‘ä¼šç¦æ­¢ä¸å®‰å…¨æ“ä½œ  
âœ… æˆ‘çŸ¥é“ä¸ Java private çš„å·®å¼‚  
âœ… æˆ‘æ˜ç™½ç°ä»£ C++ çš„æœ€ä½³å®è·µ

> ğŸ¯ **è¾¾æ ‡æ ‡å‡†**ï¼šå®ŒæˆåŸºç¡€é¢˜ + æ­£ç¡®åˆ†æé™·é˜±é¢˜ 5 å’Œ 6

---

## ğŸš€ ä¸‹ä¸€æ­¥å»ºè®®

ä½ å·²æŒæ¡ **C++ =default ä¸ =delete çš„æ ¸å¿ƒçŸ¥è¯†**ï¼

æ¥ä¸‹æ¥ä½ å¯ä»¥ï¼š
1. **ç»§ç»­å­¦ä¹  2.3 RAIIï¼ˆResource Acquisition Is Initializationï¼‰**
2. **è¯·æ±‚ç”Ÿæˆã€ŒC++ =default/=delete é€ŸæŸ¥å¡ã€**
3. **è·³è½¬åˆ°ç»ƒä¹ é¢˜ç­”æ¡ˆä¸è§£æ**

è¯·å‘Šè¯‰æˆ‘ä½ çš„é€‰æ‹©ï¼Œæˆ‘ä»¬å°†ç»§ç»­å‰è¡Œï¼